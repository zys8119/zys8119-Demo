var z1={},se={get exports(){return z1},set exports(Y0){z1=Y0}};(function(Y0){(function(p1){var e1=typeof window=="object"&&!!window.document,a0=e1?window:Object;p1(a0,e1),Y0.exports&&(Y0.exports=a0.Recorder)})(function(p1,e1){var a0=function(){},x1=function(d){return typeof d=="number"},o0=function(d){return new H(d)},T0=o0.LM="2023-12-24 18:09",h0="https://github.com/xiangyuecn/Recorder",v1="Recorder",G0="getUserMedia",m1="srcSampleRate",g0="sampleRate",B1="bitRate",S1="catch",g=p1[v1];if(g&&g.LM==T0){g.CLog(g.i18n.$T("K8zP::重复导入{1}",0,v1),3);return}o0.IsOpen=function(){var d=o0.Stream;if(d){var E=d.getTracks&&d.getTracks()||d.audioTracks||[],p=E[0];if(p){var k=p.readyState;return k=="live"||k==p.LIVE}}return!1},o0.BufferSize=4096,o0.Destroy=function(){y0(v1+" Destroy"),J0();for(var d in v0)v0[d]()};var v0={};o0.BindDestroy=function(d,E){v0[d]=E},o0.Support=function(){if(!e1)return!1;var d=navigator.mediaDevices||{};return d[G0]||(d=navigator,d[G0]||(d[G0]=d.webkitGetUserMedia||d.mozGetUserMedia||d.msGetUserMedia)),!(!d[G0]||(o0.Scope=d,!o0.GetContext()))},o0.GetContext=function(d){if(!e1)return null;var E=window.AudioContext;if(E||(E=window.webkitAudioContext),!E)return null;var p=o0.Ctx;if((!p||p.state=="closed")&&(p=o0.Ctx=new E,o0.NewCtxs=o0.NewCtxs||[],o0.BindDestroy("Ctx",function(){var k=o0.Ctx;k&&k.close&&(k.close(),o0.Ctx=0);var j=o0.NewCtxs;o0.NewCtxs=[];for(var l0=0;l0<j.length;l0++)j[l0].close()})),d&&p.close)try{p=new E,o0.NewCtxs.push(p)}catch(k){y0("GetContext tryNew Error",1,k)}return p},o0.CloseNewCtx=function(d){if(d&&d!=o0.Ctx){d.close&&d.close();for(var E=o0.NewCtxs||[],p=E.length,k=0;k<E.length;k++)if(E[k]==d){E.splice(k,1);break}y0(s0("mSxV::剩{1}个GetContext未close",0,p+"-1="+E.length),E.length?3:0)}};var w0=function(d){var E=d.state,p="ctx.state="+E;return E=="suspended"&&(p+=s0("nMIy::（注意：ctx不是running状态，rec.open和start至少要有一个在用户操作(触摸、点击等)时进行调用，否则将在rec.start时尝试进行ctx.resume，可能会产生兼容性问题(仅iOS)，请参阅文档中runningContext配置）")),p},O0="ConnectEnableWebM";o0[O0]=!0;var z="ConnectEnableWorklet";o0[z]=!1;var x0=function(d,E){var p=d.BufferSize||o0.BufferSize,k=d.Stream,j=k._RC||k._c||o0.GetContext(!0);k._c=j;var l0=function(X){var S=k._m=j.createMediaStreamSource(k),U=j.destination,c="createMediaStreamDestination";j[c]&&(U=k._d=j[c]()),S.connect(X),X.connect(U)},Q,o,r0,M0="",F0=k._call,a1=function(X){for(var S in F0){for(var U=X.length,c=new Int16Array(U),L=0,q=0;q<U;q++){var T=Math.max(-1,Math.min(1,X[q]));T=T<0?T*32768:T*32767,c[q]=T,L+=Math.abs(T)}for(var Y in F0)F0[Y](c,L);return}},b0="ScriptProcessor",V0="audioWorklet",R0=v1+" "+V0,t0="RecProc",P0="MediaRecorder",D0=P0+".WebM.PCM",E0=j.createScriptProcessor||j.createJavaScriptNode,Z0=s0("ZGlf::。由于{1}内部1秒375次回调，在移动端可能会有性能问题导致回调丢失录音变短，PC端无影响，暂不建议开启{1}。",0,V0),C0=function(){o=k.isWorklet=!1,z0(k),y0(s0("7TU0::Connect采用老的{1}，",0,b0)+i1.get(o0[z]?s0("JwCL::但已设置{1}尝试启用{2}",2):s0("VGjB::可设置{1}尝试启用{2}",2),[v1+"."+z+"=true",V0])+M0+Z0,3);var X=k._p=E0.call(j,p,1,1);l0(X),X.onaudioprocess=function(S){var U=S.inputBuffer.getChannelData(0);a1(U)}},v=function(){Q=k.isWebM=!1,k0(k),o=k.isWorklet=!E0||o0[z];var X=window.AudioWorkletNode;if(!(o&&j[V0]&&X)){C0();return}var S=function(){var q=function(Y){return Y.toString().replace(/^function|DEL_/g,"").replace(/\$RA/g,R0)},T="class "+t0+" extends AudioWorkletProcessor{";return T+="constructor "+q(function(Y){DEL_super(Y);var B=this,W=Y.processorOptions.bufferSize;B.bufferSize=W,B.buffer=new Float32Array(W*2),B.pos=0,B.port.onmessage=function(A){A.data.kill&&(B.kill=!0,$C.log("$RA kill call"))},$C.log("$RA .ctor call",Y)}),T+="process "+q(function(Y,B,W){var A=this,y=A.bufferSize,e=A.buffer,n=A.pos;if(Y=(Y[0]||[])[0]||[],Y.length){e.set(Y,n),n+=Y.length;var m=~~(n/y)*y;if(m){this.port.postMessage({val:e.slice(0,m)});var C=e.subarray(m,n);e=new Float32Array(y*2),e.set(C),n=C.length,A.buffer=e}A.pos=n}return!A.kill}),T+='}try{registerProcessor("'+t0+'", '+t0+')}catch(e){$C.error("'+R0+' Reg Error",e)}',T=T.replace(/\$C\./g,"console."),"data:text/javascript;base64,"+btoa(unescape(encodeURIComponent(T)))},U=function(){return o&&k._na},c=k._na=function(){r0!==""&&(clearTimeout(r0),r0=setTimeout(function(){r0=0,U()&&(y0(s0("MxX1::{1}未返回任何音频，恢复使用{2}",0,V0,b0),3),E0&&C0())},500))},L=function(){if(U()){var q=k._n=new X(j,t0,{processorOptions:{bufferSize:p}});l0(q),q.port.onmessage=function(T){r0&&(clearTimeout(r0),r0=""),U()?a1(T.data.val):o||y0(s0("XUap::{1}多余回调",0,V0),3)},y0(s0("yOta::Connect采用{1}，设置{2}可恢复老式{3}",0,V0,v1+"."+z+"=false",b0)+M0+Z0,3)}};j.resume()[F0&&"finally"](function(){if(U()){if(j[t0]){L();return}var q=S();j[V0].addModule(q).then(function(T){U()&&(j[t0]=1,L(),r0&&c())})[S1](function(T){y0(V0+".addModule Error",1,T),U()&&C0()})}})},I=function(){var X=window[P0],S="ondataavailable",U="audio/webm; codecs=pcm";Q=k.isWebM=o0[O0];var c=X&&S in X.prototype&&X.isTypeSupported(U);if(M0=c?"":s0("VwPd::（此浏览器不支持{1}）",0,D0),!E||!Q||!c){v();return}var L=function(){return Q&&k._ra};k._ra=function(){r0!==""&&(clearTimeout(r0),r0=setTimeout(function(){L()&&(y0(s0("vHnb::{1}未返回任何音频，降级使用{2}",0,P0,V0),3),v())},500))};var q=Object.assign({mimeType:U},o0.ConnectWebMOptions),T=k._r=new X(k,q),Y=k._rd={sampleRate:j[g0]};T[S]=function(B){var W=new FileReader;W.onloadend=function(){if(L()){var A=h1(new Uint8Array(W.result),Y);if(!A)return;if(A==-1){v();return}r0&&(clearTimeout(r0),r0=""),a1(A)}else Q||y0(s0("O9P7::{1}多余回调",0,P0),3)},W.readAsArrayBuffer(B.data)},T.start(~~(p/48)),y0(s0("LMEm::Connect采用{1}，设置{2}可恢复使用{3}或老式{4}",0,D0,v1+"."+O0+"=false",V0,b0))};I()},N0=function(d){d._na&&d._na(),d._ra&&d._ra()},z0=function(d){d._na=null,d._n&&(d._n.port.postMessage({kill:!0}),d._n.disconnect(),d._n=null)},k0=function(d){d._ra=null,d._r&&(d._r.stop(),d._r=null)},J0=function(d){d=d||o0;var E=d==o0,p=d.Stream;p&&(p._m&&(p._m.disconnect(),p._m=null),!p._RC&&p._c&&o0.CloseNewCtx(p._c),p._RC=null,p._c=null,p._d&&(U0(p._d.stream),p._d=null),p._p&&(p._p.disconnect(),p._p.onaudioprocess=p._p=null),z0(p),k0(p),E&&U0(p)),d.Stream=0},U0=o0.StopS_=function(d){for(var E=d.getTracks&&d.getTracks()||d.audioTracks||[],p=0;p<E.length;p++){var k=E[p];k.stop&&k.stop()}d.stop&&d.stop()};o0.SampleData=function(d,E,p,k,j){var l0="SampleData";k||(k={});var Q=k.index||0,o=k.offset||0,r0=k.filter;if(r0&&r0.fn&&r0.sr!=E&&(r0=null,y0(s0("d48C::{1}的filter采样率变了，重设滤波",0,l0),3)),!r0){var M0=p>E*3/4?0:p/2*3/4;r0={fn:M0?o0.IIRFilter(!0,E,M0):0}}r0.sr=E;var F0=r0.fn,a1=k.frameNext||[];j||(j={});var b0=j.frameSize||1;j.frameType&&(b0=j.frameType=="mp3"?1152:1);var V0=d.length;Q>V0+1&&y0(s0("tlbC::{1}似乎传入了未重置chunk {2}",0,l0,Q+">"+V0),3);for(var R0=0,t0=Q;t0<V0;t0++)R0+=d[t0].length;R0=Math.max(0,R0-Math.floor(o));var P0=E/p;P0>1?R0=Math.floor(R0/P0):(P0=1,p=E),R0+=a1.length;for(var D0=new Int16Array(R0),E0=0,t0=0;t0<a1.length;t0++)D0[E0]=a1[t0],E0++;for(;Q<V0;Q++){for(var Z0=d[Q],t0=o,C0=Z0.length,v=F0&&F0.Embed,I=0,X=0,S=0,U=0,c=0,L=0;c<C0;c++,L++){if(L<C0&&(v?(S=Z0[L],U=v.b0*S+v.b1*v.x1+v.b0*v.x2-v.a1*v.y1-v.a2*v.y2,v.x2=v.x1,v.x1=S,v.y2=v.y1,v.y1=U):U=F0?F0(Z0[L]):Z0[L]),I=X,X=U,L==0){c--;continue}var q=Math.floor(t0);if(c==q){var T=Math.ceil(t0),Y=t0-q,B=I,W=T<C0?X:B,A=B+(W-B)*Y;A>32767?A=32767:A<-32768&&(A=-32768),D0[E0]=A,E0++,t0+=P0}}o=Math.max(0,t0-C0)}a1=null;var y=D0.length%b0;if(y>0){var e=(D0.length-y)*2;a1=new Int16Array(D0.buffer.slice(e)),D0=new Int16Array(D0.buffer.slice(0,e))}return{index:Q,offset:o,filter:r0,frameNext:a1,sampleRate:p,data:D0}},o0.IIRFilter=function(d,E,p){var k=2*Math.PI*p/E,j=Math.sin(k),l0=Math.cos(k),Q=j/2,o=1+Q,r0=-2*l0/o,M0=(1-Q)/o;if(d)var F0=(1-l0)/2/o,a1=(1-l0)/o;else var F0=(1+l0)/2/o,a1=-(1+l0)/o;var b0=0,V0=0,R0=0,t0=0,P0=0,D0=function(E0){return R0=F0*E0+a1*b0+F0*V0-r0*t0-M0*P0,V0=b0,b0=E0,P0=t0,t0=R0,R0};return D0.Embed={x1:0,x2:0,y1:0,y2:0,b0:F0,b1:a1,a1:r0,a2:M0},D0},o0.PowerLevel=function(d,E){var p=d/E||0,k;return p<1251?k=Math.round(p/1250*10):k=Math.round(Math.min(100,Math.max(0,(1+Math.log(p/1e4)/Math.log(10))*100))),k},o0.PowerDBFS=function(d){var E=Math.max(.1,d||0),p=32767;return E=Math.min(E,p),E=20*Math.log(E/p)/Math.log(10),Math.max(-100,Math.round(E))},o0.CLog=function(d,E){if(typeof console=="object"){var p=new Date,k=("0"+p.getMinutes()).substr(-2)+":"+("0"+p.getSeconds()).substr(-2)+"."+("00"+p.getMilliseconds()).substr(-3),j=this&&this.envIn&&this.envCheck&&this.id,l0=["["+k+" "+v1+(j?":"+j:"")+"]"+d],Q=arguments,o=o0.CLog,r0=2,M0=o.log||console.log;for(x1(E)?M0=E==1?o.error||console.error:E==3?o.warn||console.warn:M0:r0=1;r0<Q.length;r0++)l0.push(Q[r0]);L0?M0&&M0("[IsLoser]"+l0[0],l0.length>1?l0:""):M0.apply(console,l0)}};var y0=function(){o0.CLog.apply(this,arguments)},L0=!0;try{L0=!console.log.apply}catch{}var u0=0;function H(d){var E=this;E.id=++u0,l1();var p={type:"mp3",onProcess:a0};for(var k in d)p[k]=d[k];E.set=p;var j=p[B1],l0=p[g0];(j&&!x1(j)||l0&&!x1(l0))&&E.CLog(s0.G("IllegalArgs-1",[s0("VtS4::{1}和{2}必须是数值",0,g0,B1)]),1,d),p[B1]=+j||16,p[g0]=+l0||16e3,E.state=0,E._S=9,E.Sync={O:9,C:9}}o0.Sync={O:9,C:9},o0.prototype=H.prototype={CLog:y0,_streamStore:function(){return this.set.sourceStream?this:o0},_streamCtx:function(){var d=this._streamStore().Stream;return d&&d._c},open:function(d,E){var p=this,k=p.set,j=p._streamStore(),l0=0;d=d||a0;var Q=function(v,I){I=!!I,p.CLog(s0("5tWi::录音open失败：")+v+",isUserNotAllow:"+I,1),l0&&o0.CloseNewCtx(l0),E&&E(v,I)};p._streamTag=G0;var o=function(){p.CLog("open ok, id:"+p.id+" stream:"+p._streamTag),d(),p._SO=0},r0=j.Sync,M0=++r0.O,F0=r0.C;p._O=p._O_=M0,p._SO=p._S;var a1=function(){if(F0!=r0.C||!p._O){var v=s0("dFm8::open被取消");return M0==r0.O?p.close():v=s0("VtJO::open被中断"),Q(v),!0}};if(!e1){Q(s0.G("NonBrowser-1",["open"])+s0("EMJq::，可尝试使用RecordApp解决方案")+"("+h0+"/tree/master/app-support-sample)");return}var b0=p.envCheck({envName:"H5",canProcess:!0});if(b0){Q(s0("A5bm::不能录音：")+b0);return}if(k.sourceStream){if(p._streamTag="set.sourceStream",!o0.GetContext()){Q(s0("1iU7::不支持此浏览器从流中获取录音"));return}J0(j);var V0=p.Stream=k.sourceStream;V0._RC=k.runningContext,V0._call={};try{x0(j)}catch(v){J0(j),Q(s0("BTW2::从流中打开录音失败：")+v.message);return}o();return}var R0=function(v,I){try{window.top.a}catch{Q(s0("Nclz::无权录音(跨域，请尝试给iframe添加麦克风访问策略，如{1})",0,'allow="camera;microphone"'));return}/Permission|Allow/i.test(v)?Q(s0("gyO5::用户拒绝了录音权限"),!0):window.isSecureContext===!1?Q(s0("oWNo::浏览器禁止不安全页面录音，可开启https解决")):/Found/i.test(v)?Q(I+s0("jBa9::，无可用麦克风")):Q(I)};if(o0.IsOpen()){o();return}if(!o0.Support()){R0("",s0("COxc::此浏览器不支持录音"));return}var t0=k.runningContext;t0||(t0=l0=o0.GetContext(!0));var P0=function(v){setTimeout(function(){v._call={};var I=o0.Stream;I&&(J0(),v._call=I._call),o0.Stream=v,v._c=t0,v._RC=k.runningContext,!a1()&&(o0.IsOpen()?(I&&p.CLog(s0("upb8::发现同时多次调用open"),1),x0(j,1),o()):Q(s0("Q1GA::录音功能无效：无音频流")))},100)},D0=function(v){var I=v.name||v.message||v.code+":"+v;p.CLog(s0("xEQR::请求录音权限错误"),1,v),R0(I,s0("bDOG::无法录音：")+I)},E0=k.audioTrackSet||{};E0[g0]=t0[g0];var Z0={audio:E0};try{var C0=o0.Scope[G0](Z0,P0,D0)}catch(v){p.CLog(G0,3,v),Z0={audio:!0},C0=o0.Scope[G0](Z0,P0,D0)}p.CLog(G0+"("+JSON.stringify(Z0)+") "+w0(t0)+s0("RiWe::，未配置noiseSuppression和echoCancellation时浏览器可能会自动打开降噪和回声消除，移动端可能会降低系统播放音量（关闭录音后可恢复），请参阅文档中audioTrackSet配置")+"("+h0+") LM:"+T0+" UA:"+navigator.userAgent),C0&&C0.then&&C0.then(P0)[S1](D0)},close:function(d){d=d||a0;var E=this,p=E._streamStore();E._stop();var k=" stream:"+E._streamTag,j=p.Sync;if(E._O=0,E._O_!=j.O){E.CLog(s0("hWVz::close被忽略（因为同时open了多个rec，只有最后一个会真正close）")+k,3),d();return}j.C++,J0(p),E.CLog("close,"+k),d()},mock:function(d,E){var p=this;return p._stop(),p.isMock=1,p.mockEnvInfo=null,p.buffers=[d],p.recSize=d.length,p._setSrcSR(E),p._streamTag="mock",p},_setSrcSR:function(d){var E=this,p=E.set,k=p[g0];k>d?p[g0]=d:k=0,E[m1]=d,E.CLog(m1+": "+d+" set."+g0+": "+p[g0]+(k?" "+s0("UHvm::忽略")+": "+k:""),k?3:0)},envCheck:function(d){var E,p=this,k=p.set,j="CPU_BE";if(!E&&!o0[j]&&typeof Int8Array=="function"&&!new Int8Array(new Int32Array([1]).buffer)[0]&&(l1(j),E=s0("Essp::不支持{1}架构",0,j)),!E){var l0=k.type,Q=p[l0+"_envCheck"];k.takeoffEncodeChunk&&(Q?d.canProcess||(E=s0("7uMV::{1}环境不支持实时处理",0,d.envName)):E=s0("2XBl::{1}类型不支持设置takeoffEncodeChunk",0,l0)+(p[l0]?"":s0("LG7e::(未加载编码器)"))),!E&&Q&&(E=p[l0+"_envCheck"](d,k))}return E||""},envStart:function(d,E){var p=this,k=p.set;if(p.isMock=d?1:0,p.mockEnvInfo=d,p.buffers=[],p.recSize=0,d&&(p._streamTag="env$"+d.envName),p.state=1,p.envInLast=0,p.envInFirst=0,p.envInFix=0,p.envInFixTs=[],p._setSrcSR(E),p.engineCtx=0,p[k.type+"_start"]){var j=p.engineCtx=p[k.type+"_start"](k);j&&(j.pcmDatas=[],j.pcmSize=0)}},envResume:function(){this.envInFixTs=[]},envIn:function(d,E){var p=this,k=p.set,j=p.engineCtx;if(p.state!=1){p.state||p.CLog("envIn at state=0",3);return}var l0=p[m1],Q=d.length,o=o0.PowerLevel(E,Q),r0=p.buffers,M0=r0.length;r0.push(d);var F0=r0,a1=M0,b0=Date.now(),V0=Math.round(Q/l0*1e3);p.envInLast=b0,p.buffers.length==1&&(p.envInFirst=b0-V0);var R0=p.envInFixTs;R0.splice(0,0,{t:b0,d:V0});for(var t0=b0,P0=0,D0=0;D0<R0.length;D0++){var E0=R0[D0];if(b0-E0.t>3e3){R0.length=D0;break}t0=E0.t,P0+=E0.d}var Z0=R0[1],C0=b0-t0,v=C0-P0;if(v>C0/3&&(Z0&&C0>1e3||R0.length>=6)){var I=b0-Z0.t-V0;if(I>V0/5){var X=!k.disableEnvInFix;if(p.CLog("["+b0+"]"+i1.get(s0(X?"4Kfd::补偿{1}ms":"bM5i::未补偿{1}ms",1),[I]),3),p.envInFix+=I,X){var S=new Int16Array(I*l0/1e3);Q+=S.length,r0.push(S)}}}var U=p.recSize,c=Q,L=U+c;if(p.recSize=L,j){var q=o0.SampleData(r0,l0,k[g0],j.chunkInfo);j.chunkInfo=q,U=j.pcmSize,c=q.data.length,L=U+c,j.pcmSize=L,r0=j.pcmDatas,M0=r0.length,r0.push(q.data),l0=q[g0]}var T=Math.round(L/l0*1e3),Y=r0.length,B=F0.length,W=function(){for(var m=A?0:-c,C=r0[0]==null,h=M0;h<Y;h++){var l=r0[h];l==null?C=1:(m+=l.length,j&&l.length&&p[k.type+"_encode"](j,l))}if(C&&j){var h=a1;for(F0[0]&&(h=0);h<B;h++)F0[h]=null}C&&(m=A?c:0,r0[0]=null),j?j.pcmSize+=m:p.recSize+=m},A=0,y="rec.set.onProcess";try{A=k.onProcess(r0,o,T,l0,M0,W)}catch(m){console.error(y+s0("gFUF::回调出错是不允许的，需保证不会抛异常"),m)}var e=Date.now()-b0;if(e>10&&p.envInFirst-b0>1e3&&p.CLog(y+s0("2ghS::低性能，耗时{1}ms",0,e),3),A===!0){for(var n=0,D0=M0;D0<Y;D0++)r0[D0]==null?n=1:r0[D0]=new Int16Array(0);n?p.CLog(s0("ufqH::未进入异步前不能清除buffers"),3):j?j.pcmSize-=c:p.recSize-=c}else W()},start:function(){var d=this,E=1;if(d.set.sourceStream?d.Stream||(E=0):o0.IsOpen()||(E=0),!E){d.CLog(s0("6WmN::start失败：未open"),1);return}var p=d._streamCtx();if(d.CLog(s0("kLDN::start 开始录音，")+w0(p)+" stream:"+d._streamTag),d._stop(),d.envStart(null,p[g0]),d.state=3,d._SO&&d._SO+1!=d._S){d.CLog(s0("Bp2y::start被中断"),3);return}d._SO=0;var k=function(){d.state==3&&(d.state=1,d.resume())};if(p.state=="suspended"){var j="AudioContext resume: ";d.CLog(j+"wait..."),p.resume().then(function(){d.CLog(j+p.state),k()})[S1](function(l0){d.CLog(j+p.state+s0("upkE::，可能无法录音：")+l0.message,1,l0),k()})}else k()},pause:function(){var d=this,E=d._streamStore().Stream;d.state&&(d.state=2,d.CLog("pause"),E&&delete E._call[d.id])},resume:function(){var d=this,E=d._streamStore().Stream;d.state&&(d.state=1,d.CLog("resume"),d.envResume(),E&&(E._call[d.id]=function(p,k){d.state==1&&d.envIn(p,k)},N0(E)))},_stop:function(d){var E=this,p=E.set;E.isMock||E._S++,E.state&&(E.pause(),E.state=0),!d&&E[p.type+"_stop"]&&(E[p.type+"_stop"](E.engineCtx),E.engineCtx=0)},stop:function(d,E,p){var k=this,j=k.set,l0,Q=k.envInLast-k.envInFirst,o=Q&&k.buffers.length;k.CLog(s0("Xq4s::stop 和start时差:")+(Q?Q+"ms "+s0("3CQP::补偿:")+k.envInFix+"ms envIn:"+o+" fps:"+(o/Q*1e3).toFixed(1):"-")+" stream:"+k._streamTag+" ("+h0+") LM:"+T0);var r0=function(){k._stop(),p&&k.close()},M0=function(E0){k.CLog(s0("u8JG::结束录音失败：")+E0,1),E&&E(E0),r0()},F0=function(E0,Z0,C0){var v="blob",I="arraybuffer",X="dataType",S="DefaultDataType",U=k[X]||o0[S]||v,c=X+"="+U,L=E0 instanceof ArrayBuffer,q=0,T=L?E0.byteLength:E0.size;if(U==I?L||(q=1):U==v?typeof Blob!="function"?q=s0.G("NonBrowser-1",[c])+s0("1skY::，请设置{1}",0,v1+"."+S+'="'+I+'"'):(L&&(E0=new Blob([E0],{type:Z0})),E0 instanceof Blob||(q=1),Z0=E0.type||Z0):q=s0.G("NotSupport-1",[c]),k.CLog(s0("Wv7l::结束录音 编码花{1}ms 音频时长{2}ms 文件大小{3}b",0,Date.now()-l0,C0,T)+" "+c+","+Z0),q){M0(q!=1?q:s0("Vkbd::{1}编码器返回的不是{2}",0,j.type,U)+", "+c);return}if(j.takeoffEncodeChunk)k.CLog(s0("QWnr::启用takeoffEncodeChunk后stop返回的blob长度为0不提供音频数据"),3);else if(T<Math.max(50,C0/5)){M0(s0("Sz2H::生成的{1}无效",0,j.type));return}d&&d(E0,C0,Z0),r0()};if(!k.isMock){var a1=k.state==3;if(!k.state||a1){M0(s0("wf9t::未开始录音")+(a1?s0("Dl2c::，开始录音前无用户交互导致AudioContext未运行"):""));return}}k._stop(!0);var b0=k.recSize;if(!b0){M0(s0("Ltz3::未采集到录音"));return}if(!k[j.type]){M0(s0("xGuI::未加载{1}编码器，请尝试到{2}的src/engine内找到{1}的编码器并加载",0,j.type,v1));return}if(k.isMock){var V0=k.envCheck(k.mockEnvInfo||{envName:"mock",canProcess:!1});if(V0){M0(s0("AxOH::录音错误：")+V0);return}}var R0=k.engineCtx;if(k[j.type+"_complete"]&&R0){var D0=Math.round(R0.pcmSize/j[g0]*1e3);l0=Date.now(),k[j.type+"_complete"](R0,function(Z0,C0){F0(Z0,C0,D0)},M0);return}if(l0=Date.now(),!k.buffers[0]){M0(s0("xkKd::音频buffers被释放"));return}var t0=o0.SampleData(k.buffers,k[m1],j[g0]);j[g0]=t0[g0];var P0=t0.data,D0=Math.round(P0.length/j[g0]*1e3);k.CLog(s0("CxeT::采样:{1} 花:{2}ms",0,b0+"->"+P0.length,Date.now()-l0)),setTimeout(function(){l0=Date.now(),k[j.type](P0,function(E0,Z0){F0(E0,Z0,D0)},function(E0){M0(E0)})})}};var h1=function(d,E){E.pos||(E.pos=[0],E.tracks={},E.bytes=[]);var p=E.tracks,k=[E.pos[0]],j=function(){E.pos[0]=k[0]},l0=E.bytes.length,Q=new Uint8Array(l0+d.length);if(Q.set(E.bytes),Q.set(d,l0),E.bytes=Q,!E._ht){if(f1(Q,k),u1(Q,k),!o1(f1(Q,k),[24,83,128,103]))return;for(f1(Q,k);k[0]<Q.length;){var o=f1(Q,k),r0=u1(Q,k),M0=[0],F0=0;if(!r0)return;if(o1(o,[22,84,174,107])){for(;M0[0]<r0.length;){var a1=f1(r0,M0),b0=u1(r0,M0),V0=[0],R0={channels:0,sampleRate:0};if(o1(a1,[174]))for(;V0[0]<b0.length;){var t0=f1(b0,V0),P0=u1(b0,V0),D0=[0];if(o1(t0,[215])){var E0=I0(P0);R0.number=E0,p[E0]=R0}else if(o1(t0,[131])){var E0=I0(P0);E0==1?R0.type="video":E0==2?(R0.type="audio",F0||(E.track0=R0),R0.idx=F0++):R0.type="Type-"+E0}else if(o1(t0,[134])){for(var Z0="",C0=0;C0<P0.length;C0++)Z0+=String.fromCharCode(P0[C0]);R0.codec=Z0}else if(o1(t0,[225]))for(;D0[0]<P0.length;){var v=f1(P0,D0),I=u1(P0,D0);if(o1(v,[181])){var E0=0,X=new Uint8Array(I.reverse()).buffer;I.length==4?E0=new Float32Array(X)[0]:I.length==8?E0=new Float64Array(X)[0]:y0("WebM Track !Float",1,I),R0[g0]=Math.round(E0)}else o1(v,[98,100])?R0.bitDepth=I0(I):o1(v,[159])&&(R0.channels=I0(I))}}}E._ht=1,y0("WebM Tracks",p),j();break}}}var S=E.track0;if(S){if(S.bitDepth==16&&/FLOAT/i.test(S.codec)&&(S.bitDepth=32,y0("WebM 16->32 bit",3)),S[g0]!=E[g0]||S.bitDepth!=32||S.channels<1||!/(\b|_)PCM\b/i.test(S.codec))return E.bytes=[],E.bad||y0("WebM Track Unexpected",3,E),E.bad=1,-1;for(var U=[],c=0;k[0]<Q.length;){var a1=f1(Q,k),b0=u1(Q,k);if(!b0)break;if(o1(a1,[163])){var L=b0[0]&15,R0=p[L];if(!R0)y0("WebM !Track"+L,1,p);else if(R0.idx===0){for(var q=new Uint8Array(b0.length-4),C0=4;C0<b0.length;C0++)q[C0-4]=b0[C0];U.push(q),c+=q.length}}j()}if(c){var T=new Uint8Array(Q.length-E.pos[0]);T.set(Q.subarray(E.pos[0])),E.bytes=T,E.pos[0]=0;for(var q=new Uint8Array(c),C0=0,Y=0;C0<U.length;C0++)q.set(U[C0],Y),Y+=U[C0].length;var X=new Float32Array(q.buffer);if(S.channels>1){for(var B=[],C0=0;C0<X.length;)B.push(X[C0]),C0+=S.channels;X=new Float32Array(B)}return X}}},o1=function(d,E){if(!d||d.length!=E.length)return!1;if(d.length==1)return d[0]==E[0];for(var p=0;p<d.length;p++)if(d[p]!=E[p])return!1;return!0},I0=function(d){for(var E="",p=0;p<d.length;p++){var k=d[p];E+=(k<16?"0":"")+k.toString(16)}return parseInt(E,16)||0},f1=function(d,E,p){var k=E[0];if(!(k>=d.length)){var j=d[k],l0=("0000000"+j.toString(2)).substr(-8),Q=/^(0*1)(\d*)$/.exec(l0);if(Q){var o=Q[1].length,r0=[];if(!(k+o>d.length)){for(var M0=0;M0<o;M0++)r0[M0]=d[k],k++;return p&&(r0[0]=parseInt(Q[2]||"0",2)),E[0]=k,r0}}}},u1=function(d,E){var p=f1(d,E,1);if(p){var k=I0(p),j=E[0],l0=[];if(k<2147483647){if(j+k>d.length)return;for(var Q=0;Q<k;Q++)l0[Q]=d[j],j++}return E[0]=j,l0}},i1=o0.i18n={lang:"zh-CN",alias:{"zh-CN":"zh","en-US":"en"},locales:{},data:{},put:function(d,E){var p=v1+".i18n.put: ",k=d.overwrite;k=k==null||k;var j=d.lang;if(j=i1.alias[j]||j,!j)throw new Error(p+"set.lang?");var l0=i1.locales[j];l0||(l0={},i1.locales[j]=l0);for(var Q=/^([\w\-]+):/,o,r0=0;r0<E.length;r0++){var F0=E[r0];if(o=Q.exec(F0),!o){y0(p+"'key:'? "+F0,3,d);continue}var M0=o[1],F0=F0.substr(M0.length+1);!k&&l0[M0]||(l0[M0]=F0)}},get:function(){return i1.v_G.apply(null,arguments)},v_G:function(d,E,p){E=E||[],p=p||i1.lang,p=i1.alias[p]||p;var k=i1.locales[p],j=k&&k[d]||"";return!j&&p!="zh"?p=="en"?i1.v_G(d,E,"zh"):i1.v_G(d,E,"en"):(i1.lastLang=p,j=="=Empty"?"":j.replace(/\{(\d+)(\!?)\}/g,function(l0,Q,o){return Q=+Q||0,l0=E[Q-1],(Q<1||Q>E.length)&&(l0="{?}",y0("i18n["+d+"] no {"+Q+"}: "+j,3)),o?"":l0}))},$T:function(){return i1.v_T.apply(null,arguments)},v_T:function(){for(var d=arguments,E="",p=[],k=0,j=v1+".i18n.$T:",l0=/^([\w\-]*):/,Q,o=0;o<d.length;o++){var r0=d[o];if(o==0){if(Q=l0.exec(r0),E=Q&&Q[1],!E)throw new Error(j+"0 'key:'?");r0=r0.substr(E.length+1)}if(k===-1)p.push(r0);else{if(k)throw new Error(j+" bad args");if(r0===0)k=-1;else if(x1(r0)){if(r0<1)throw new Error(j+" bad args");k=r0}else{var M0=o==1?"en":o?"":"zh";if(Q=l0.exec(r0),Q&&(M0=Q[1]||M0,r0=r0.substr(Q[1].length+1)),!Q||!M0)throw new Error(j+o+" 'lang:'?");i1.put({lang:M0,overwrite:!1},[E+":"+r0])}}}return E?k>0?E:i1.v_G(E,p):""}},s0=i1.$T;s0.G=i1.get,s0("NonBrowser-1::非浏览器环境，不支持{1}",1),s0("IllegalArgs-1::参数错误：{1}",1),s0("NeedImport-2::调用{1}需要先导入{2}",2),s0("NotSupport-1::不支持：{1}",1),o0.TrafficImgUrl="//ia.51.la/go1?id=20469973&pvFlag=1";var l1=o0.Traffic=function(d){if(e1){d=d?"/"+v1+"/Report/"+d:"";var E=o0.TrafficImgUrl;if(E){var p=o0.Traffic,k=/^(https?:..[^\/#]*\/?)[^#]*/i.exec(location.href)||[],j=k[1]||"http://file/",l0=(k[0]||j)+d;if(E.indexOf("//")==0&&(/^https:/i.test(l0)?E="https:"+E:E="http:"+E),d&&(E=E+"&cu="+encodeURIComponent(j+d)),!p[l0]){p[l0]=1;var Q=new Image;Q.src=E,y0("Traffic Analysis Image: "+(d||v1+".TrafficImgUrl="+o0.TrafficImgUrl))}}}};g&&(y0(s0("8HO5::覆盖导入{1}",0,v1),1),g.Destroy()),p1[v1]=o0})})(se);const ie=z1;(function(Y0){var p1=typeof window=="object"&&!!window.document,e1=p1?window:Object,a0=e1.Recorder,x1=a0.i18n;Y0(a0,x1,x1.$T,p1)})(function(Y0,p1,e1,a0){var x1="48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000",o0="8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160, 192, 224, 256, 320";Y0.prototype.enc_mp3={stable:!0,takeEC:"full",getTestMsg:function(){return e1("Zm7L::采样率范围：{1}；比特率范围：{2}（不同比特率支持的采样率范围不同，小于32kbps时采样率需小于32000）",0,x1,o0)}};var T0=function(g){var v0=g.bitRate,w0=g.sampleRate,O0=w0;if((" "+o0+",").indexOf(" "+v0+",")==-1&&Y0.CLog(e1("eGB9::{1}不在mp3支持的取值范围：{2}",0,"bitRate="+v0,o0),3),(" "+x1+",").indexOf(" "+w0+",")==-1){for(var z=x1.split(", "),x0=[],N0=0;N0<z.length;N0++)x0.push({v:+z[N0],s:Math.abs(z[N0]-w0)});x0.sort(function(z0,k0){return z0.s-k0.s}),O0=x0[0].v,g.sampleRate=O0,Y0.CLog(e1("zLTa::sampleRate已更新为{1}，因为{2}不在mp3支持的取值范围：{3}",0,O0,w0,x1),3)}},h0=function(){return e1.G("NeedImport-2",["mp3.js","src/engine/mp3-engine.js"])},v1=a0&&typeof Worker=="function";Y0.prototype.mp3=function(g,v0,w0){var O0=this,z=O0.set,x0=g.length;if(!Y0.lamejs){w0(h0());return}if(v1){var N0=O0.mp3_start(z);if(N0){if(N0.isW){O0.mp3_encode(N0,g),O0.mp3_complete(N0,v0,w0,1);return}O0.mp3_stop(N0)}}T0(z);var z0=new Y0.lamejs.Mp3Encoder(1,z.sampleRate,z.bitRate),k0=57600,J0=new Int8Array(5e5),U0=0,y0=0,L0=function(){try{if(y0<x0)var u0=z0.encodeBuffer(g.subarray(y0,y0+k0));else var u0=z0.flush()}catch(f1){console.error(f1),w0("MP3 Encoder: "+f1.message);return}var H=u0.length;if(H>0){if(U0+H>J0.length){var h1=new Int8Array(J0.length+Math.max(5e5,H));h1.set(J0.subarray(0,U0)),J0=h1}J0.set(u0,U0),U0+=H}if(y0<x0)y0+=k0,setTimeout(L0);else{var o1=[J0.buffer.slice(0,U0)],I0=B1.fn(o1,U0,x0,z.sampleRate);S1(I0,z),v0(o1[0]||new ArrayBuffer(0),"audio/mp3")}};L0()};var G0;Y0.BindDestroy("mp3Worker",function(){G0&&(Y0.CLog("mp3Worker Destroy"),G0.terminate(),G0=null)}),Y0.prototype.mp3_envCheck=function(g,v0){var w0="";return v0.takeoffEncodeChunk&&(g0()||(w0=e1("yhUs::当前浏览器版本太低，无法实时处理"))),!w0&&!Y0.lamejs&&(w0=h0()),w0},Y0.prototype.mp3_start=function(g){return g0(g)};var m1={id:0},g0=function(g,v0){var w0=function(L0){var u0=L0.data,H=x0.wkScope.wk_ctxs,h1=x0.wkScope.wk_lame,o1=x0.wkScope.wk_mp3TrimFix,I0=H[u0.id];if(u0.action=="init")H[u0.id]={sampleRate:u0.sampleRate,bitRate:u0.bitRate,takeoff:u0.takeoff,pcmSize:0,memory:new Int8Array(5e5),mOffset:0,encObj:new h1.Mp3Encoder(1,u0.sampleRate,u0.bitRate)};else if(!I0)return;var f1=function(l1){var d=l1.length;if(I0.mOffset+d>I0.memory.length){var E=new Int8Array(I0.memory.length+Math.max(5e5,d));E.set(I0.memory.subarray(0,I0.mOffset)),I0.memory=E}I0.memory.set(l1,I0.mOffset),I0.mOffset+=d};switch(u0.action){case"stop":I0.encObj=null,delete H[u0.id];break;case"encode":I0.pcmSize+=u0.pcm.length;try{var u1=I0.encObj.encodeBuffer(u0.pcm)}catch(l1){I0.err=l1,console.error(l1)}u1&&u1.length>0&&(I0.takeoff?N0.onmessage({action:"takeoff",id:u0.id,chunk:u1}):f1(u1));break;case"complete":try{var u1=I0.encObj.flush()}catch(l1){I0.err=l1,console.error(l1)}if(u1&&u1.length>0&&(I0.takeoff?N0.onmessage({action:"takeoff",id:u0.id,chunk:u1}):f1(u1)),I0.err){N0.onmessage({action:u0.action,id:u0.id,err:"MP3 Encoder: "+I0.err.message});break}var i1=[I0.memory.buffer.slice(0,I0.mOffset)],s0=o1.fn(i1,I0.mOffset,I0.pcmSize,I0.sampleRate);N0.onmessage({action:u0.action,id:u0.id,blob:i1[0]||new ArrayBuffer(0),meta:s0});break}},O0=function(L0){N0.onmessage=function(u0){var H=u0;L0&&(H=u0.data);var h1=m1[H.id];h1&&(H.action=="takeoff"?h1.set.takeoffEncodeChunk(new Uint8Array(H.chunk.buffer)):(h1.call&&h1.call(H),h1.call=null))}},z=function(){var L0={worker:N0,set:g};return g?(L0.id=++m1.id,m1[L0.id]=L0,T0(g),N0.postMessage({action:"init",id:L0.id,sampleRate:g.sampleRate,bitRate:g.bitRate,takeoff:!!g.takeoffEncodeChunk,x:new Int16Array(5)})):N0.postMessage({x:new Int16Array(5)}),L0},x0,N0=G0;if(v0||!v1)return Y0.CLog(e1("k9PT::当前环境不支持Web Worker，mp3实时编码器运行在主线程中"),3),N0={postMessage:function(L0){w0({data:L0})}},x0={wkScope:{wk_ctxs:{},wk_lame:Y0.lamejs,wk_mp3TrimFix:B1}},O0(),z();try{if(!N0){var z0=(w0+"").replace(/[\w\$]+\.onmessage/g,"self.postMessage");z0=z0.replace(/[\w\$]+\.wkScope/g,"wkScope");var k0=");wk_lame();self.onmessage="+z0;k0+=";var wkScope={ wk_ctxs:{},wk_lame:wk_lame",k0+=",wk_mp3TrimFix:{rm:"+B1.rm+",fn:"+B1.fn+"} }";var J0=Y0.lamejs.toString(),U0=(window.URL||webkitURL).createObjectURL(new Blob(["var wk_lame=(",J0,k0],{type:"text/javascript"}));N0=new Worker(U0),setTimeout(function(){(window.URL||webkitURL).revokeObjectURL(U0)},1e4),O0(1)}var y0=z();return y0.isW=1,G0=N0,y0}catch(L0){return N0&&N0.terminate(),console.error(L0),g0(g,1)}};Y0.prototype.mp3_stop=function(g){if(g&&g.worker){g.worker.postMessage({action:"stop",id:g.id}),g.worker=null,delete m1[g.id];var v0=-1;for(var w0 in m1)v0++;v0&&Y0.CLog(e1("fT6M::mp3 worker剩{1}个未stop",0,v0),3)}},Y0.prototype.mp3_encode=function(g,v0){g&&g.worker&&g.worker.postMessage({action:"encode",id:g.id,pcm:v0})},Y0.prototype.mp3_complete=function(g,v0,w0,O0){var z=this;g&&g.worker?(g.call=function(x0){O0&&z.mp3_stop(g),x0.err?w0(x0.err):(S1(x0.meta,g.set),v0(x0.blob,"audio/mp3"))},g.worker.postMessage({action:"complete",id:g.id})):w0(e1("mPxH::mp3编码器未start"))},Y0.mp3ReadMeta=function(g,v0){var w0=typeof window<"u"&&window.parseInt||typeof self<"u"&&self.parseInt||parseInt,O0=new Uint8Array(g[0]||[]);if(O0.length<4)return null;var z=function(l1,d){return("0000000"+((d||O0)[l1]||0).toString(2)).substr(-8)},x0=z(0)+z(1),N0=z(2)+z(3);if(!/^1{11}/.test(x0))return null;var z0={"00":2.5,10:2,11:1}[x0.substr(11,2)],k0={"01":3}[x0.substr(13,2)],J0={1:[44100,48e3,32e3],2:[22050,24e3,16e3],"2.5":[11025,12e3,8e3]}[z0];J0&&(J0=J0[w0(N0.substr(4,2),2)]);var U0=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320]][z0==1?1:0][w0(N0.substr(0,4),2)];if(!z0||!k0||!U0||!J0)return null;for(var y0=Math.round(v0*8/U0),L0=k0==1?384:k0==2||z0==1?1152:576,u0=L0/J0*1e3,H=Math.floor(L0*U0/8/J0*1e3),h1=0,o1=0,I0=0;I0<g.length;I0++){var f1=g[I0];if(o1+=f1.byteLength,o1>=H+3){var u1=new Uint8Array(f1),i1=f1.byteLength-(o1-(H+3)+1),s0=z(i1,u1);h1=s0.charAt(6)=="1";break}}return h1&&H++,{version:z0,layer:k0,sampleRate:J0,bitRate:U0,duration:y0,size:v0,hasPadding:h1,frameSize:H,frameDurationFloat:u0}};var B1={rm:Y0.mp3ReadMeta,fn:function(g,v0,w0,O0){var z=this.rm(g,v0);if(!z)return{err:"mp3 unknown format"};var x0=Math.round(w0/O0*1e3),N0=Math.floor((z.duration-x0)/z.frameDurationFloat);if(N0>0){var z0=N0*z.frameSize-(z.hasPadding?1:0);v0-=z0;for(var k0=0,J0=[],U0=0;U0<g.length;U0++){var y0=g[U0];if(z0<=0)break;z0>=y0.byteLength?(z0-=y0.byteLength,J0.push(y0),g.splice(U0,1),U0--):(g[U0]=y0.slice(z0),k0=y0,z0=0)}var L0=this.rm(g,v0);if(!L0){k0&&(g[0]=k0);for(var U0=0;U0<J0.length;U0++)g.splice(U0,0,J0[U0]);z.err="mp3 fix error: 已还原，错误原因不明"}var u0=z.trimFix={};u0.remove=N0,u0.removeDuration=Math.round(N0*z.frameDurationFloat),u0.duration=Math.round(v0*8/z.bitRate)}return z}},S1=function(g,v0){var w0="MP3 Info: ";(g.sampleRate&&g.sampleRate!=v0.sampleRate||g.bitRate&&g.bitRate!=v0.bitRate)&&(Y0.CLog(w0+e1("uY9i::和设置的不匹配{1}，已更新成{2}",0,"set:"+v0.bitRate+"kbps "+v0.sampleRate+"hz","set:"+g.bitRate+"kbps "+g.sampleRate+"hz"),3,v0),v0.sampleRate=g.sampleRate,v0.bitRate=g.bitRate);var O0=g.trimFix;O0?(w0+=e1("iMSm::Fix移除{1}帧",0,O0.remove)+" "+O0.removeDuration+"ms -> "+O0.duration+"ms",O0.remove>2&&(g.err=(g.err?g.err+", ":"")+e1("b9zm::移除帧数过多"))):w0+=(g.duration||"-")+"ms",g.err?Y0.CLog(w0,1,g.err,g):Y0.CLog(w0,g)}});(function(Y0){var p1=typeof window=="object"&&!!window.document,e1=p1?window:Object,a0=e1.Recorder;Y0(a0)})(function(Y0){function p1(){var e1=function(v){return Math.log(v)/Math.log(10)},a0=function(v){throw new Error("abort("+v+")")};function x1(v){return new Int8Array(v)}function o0(v){return new Int16Array(v)}function T0(v){return new Int32Array(v)}function h0(v){return new Float32Array(v)}function v1(v){return new Float64Array(v)}function G0(v){if(v.length==1)return h0(v[0]);var I=v[0];v=v.slice(1);for(var X=[],S=0;S<I;S++)X.push(G0(v));return X}function m1(v){if(v.length==1)return T0(v[0]);var I=v[0];v=v.slice(1);for(var X=[],S=0;S<I;S++)X.push(m1(v));return X}function g0(v){if(v.length==1)return o0(v[0]);var I=v[0];v=v.slice(1);for(var X=[],S=0;S<I;S++)X.push(g0(v));return X}function B1(v){if(v.length==1)return new Array(v[0]);var I=v[0];v=v.slice(1);for(var X=[],S=0;S<I;S++)X.push(B1(v));return X}var S1={};S1.fill=function(v,I,X,S){if(arguments.length==2)for(var U=0;U<v.length;U++)v[U]=arguments[1];else for(var U=I;U<X;U++)v[U]=S};var g={};g.arraycopy=function(v,I,X,S,U){for(var c=I+U;I<c;)X[S++]=v[I++]};var v0={};v0.SQRT2=1.4142135623730951,v0.FAST_LOG10=function(v){return e1(v)},v0.FAST_LOG10_X=function(v,I){return e1(v)*I};function w0(v){this.ordinal=v}w0.short_block_allowed=new w0(0),w0.short_block_coupled=new w0(1),w0.short_block_dispensed=new w0(2),w0.short_block_forced=new w0(3);var O0={};O0.MAX_VALUE=34028235e31;function z(v){this.ordinal=v}z.vbr_off=new z(0),z.vbr_mt=new z(1),z.vbr_rh=new z(2),z.vbr_abr=new z(3),z.vbr_mtrh=new z(4),z.vbr_default=z.vbr_mtrh;function x0(v){var I=v;this.ordinal=function(){return I}}x0.STEREO=new x0(0),x0.JOINT_STEREO=new x0(1),x0.DUAL_CHANNEL=new x0(2),x0.MONO=new x0(3),x0.NOT_SET=new x0(4);function N0(){var v=3,I=98,X=4;this.getLameShortVersion=function(){return v+"."+I+"."+X}}function z0(){var v=null;this.qupvt=null,this.setModules=function(i){this.qupvt=i,v=i};function I(i){this.bits=0|i}var X=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function S(i,_,f,b,M,a){var t=.5946/_;for(i=i>>1;i--!=0;)M[a++]=t>f[b++]?0:1,M[a++]=t>f[b++]?0:1}function U(i,_,f,b,M,a){i=i>>1;var t=i%2;for(i=i>>1;i--!=0;){var F,w,D,P,Z,K,c0,S0;F=f[b++]*_,w=f[b++]*_,Z=0|F,D=f[b++]*_,K=0|w,P=f[b++]*_,c0=0|D,F+=v.adj43[Z],S0=0|P,w+=v.adj43[K],M[a++]=0|F,D+=v.adj43[c0],M[a++]=0|w,P+=v.adj43[S0],M[a++]=0|D,M[a++]=0|P}if(t!=0){var F,w,Z,K;F=f[b++]*_,w=f[b++]*_,Z=0|F,K=0|w,F+=v.adj43[Z],w+=v.adj43[K],M[a++]=0|F,M[a++]=0|w}}function c(i,_,f,b,M){var a,t,F=0,w,D=0,P=0,Z=0,K=_,c0=0,S0=K,m0=0,n1=i,s1=0;for(w=M!=null&&b.global_gain==M.global_gain,b.block_type==o.SHORT_TYPE?t=38:t=21,a=0;a<=t;a++){var K0=-1;if((w||b.block_type==o.NORM_TYPE)&&(K0=b.global_gain-(b.scalefac[a]+(b.preflag!=0?v.pretab[a]:0)<<b.scalefac_scale+1)-b.subblock_gain[b.window[a]]*8),w&&M.step[a]==K0)D!=0&&(U(D,f,n1,s1,S0,m0),D=0),P!=0&&a0();else{var t1=b.width[a];if(F+b.width[a]>b.max_nonzero_coeff){var c1;c1=b.max_nonzero_coeff-F+1,S1.fill(_,b.max_nonzero_coeff,576,0),t1=c1,t1<0&&(t1=0),a=t+1}if(D==0&&P==0&&(S0=K,m0=c0,n1=i,s1=Z),M!=null&&M.sfb_count1>0&&a>=M.sfb_count1&&M.step[a]>0&&K0>=M.step[a]?(D!=0&&(U(D,f,n1,s1,S0,m0),D=0,S0=K,m0=c0,n1=i,s1=Z),P+=t1):(P!=0&&(S(P,f,n1,s1,S0,m0),P=0,S0=K,m0=c0,n1=i,s1=Z),D+=t1),t1<=0){P!=0&&a0(),D!=0&&a0();break}}a<=t&&(c0+=b.width[a],Z+=b.width[a],F+=b.width[a])}D!=0&&(U(D,f,n1,s1,S0,m0),D=0),P!=0&&a0()}function L(i,_,f){var b=0,M=0;do{var a=i[_++],t=i[_++];b<a&&(b=a),M<t&&(M=t)}while(_<f);return b<M&&(b=M),b}function q(i,_,f,b,M,a){var t=H.ht[b].xlen*65536+H.ht[M].xlen,F=0,w;do{var D=i[_++],P=i[_++];D!=0&&(D>14&&(D=15,F+=t),D*=16),P!=0&&(P>14&&(P=15,F+=t),D+=P),F+=H.largetbl[D]}while(_<f);return w=F&65535,F>>=16,F>w&&(F=w,b=M),a.bits+=F,b}function T(i,_,f,b){var M=0,a=H.ht[1].hlen;do{var t=i[_+0]*2+i[_+1];_+=2,M+=a[t]}while(_<f);return b.bits+=M,1}function Y(i,_,f,b,M){var a=0,t,F=H.ht[b].xlen,w;b==2?w=H.table23:w=H.table56;do{var D=i[_+0]*F+i[_+1];_+=2,a+=w[D]}while(_<f);return t=a&65535,a>>=16,a>t&&(a=t,b++),M.bits+=a,b}function B(i,_,f,b,M){var a=0,t=0,F=0,w=H.ht[b].xlen,D=H.ht[b].hlen,P=H.ht[b+1].hlen,Z=H.ht[b+2].hlen;do{var K=i[_+0]*w+i[_+1];_+=2,a+=D[K],t+=P[K],F+=Z[K]}while(_<f);var c0=b;return a>t&&(a=t,c0++),a>F&&(a=F,c0=b+2),M.bits+=a,c0}var W=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function A(i,_,f,b){var M=L(i,_,f);switch(M){case 0:return M;case 1:return T(i,_,f,b);case 2:case 3:return Y(i,_,f,W[M-1],b);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return B(i,_,f,W[M-1],b);default:M>d.IXMAX_VAL&&a0(),M-=15;var a;for(a=24;a<32&&!(H.ht[a].linmax>=M);a++);var t;for(t=a-8;t<24&&!(H.ht[t].linmax>=M);t++);return q(i,_,f,t,a,b)}}this.noquant_count_bits=function(i,_,f){var b=_.l3_enc,M=Math.min(576,_.max_nonzero_coeff+2>>1<<1);for(f!=null&&(f.sfb_count1=0);M>1&&!(b[M-1]|b[M-2]);M-=2);_.count1=M;for(var a=0,t=0;M>3;M-=4){var F;if(((b[M-1]|b[M-2]|b[M-3]|b[M-4])&2147483647)>1)break;F=((b[M-4]*2+b[M-3])*2+b[M-2])*2+b[M-1],a+=H.t32l[F],t+=H.t33l[F]}var w=a;if(_.count1table_select=0,a>t&&(w=t,_.count1table_select=1),_.count1bits=w,_.big_values=M,M==0)return w;if(_.block_type==o.SHORT_TYPE)a=3*i.scalefac_band.s[3],a>_.big_values&&(a=_.big_values),t=_.big_values;else if(_.block_type==o.NORM_TYPE){if(a=_.region0_count=i.bv_scf[M-2],t=_.region1_count=i.bv_scf[M-1],t=i.scalefac_band.l[a+t+2],a=i.scalefac_band.l[a+1],t<M){var D=new I(w);_.table_select[2]=A(b,t,M,D),w=D.bits}}else _.region0_count=7,_.region1_count=o.SBMAX_l-1-7-1,a=i.scalefac_band.l[7+1],t=M,a>t&&(a=t);if(a=Math.min(a,M),t=Math.min(t,M),0<a){var D=new I(w);_.table_select[0]=A(b,0,a,D),w=D.bits}if(a<t){var D=new I(w);_.table_select[1]=A(b,a,t,D),w=D.bits}if(i.use_best_huffman==2&&a0(),f!=null&&_.block_type==o.NORM_TYPE){for(var P=0;i.scalefac_band.l[P]<_.big_values;)P++;f.sfb_count1=P}return w},this.count_bits=function(i,_,f,b){var M=f.l3_enc,a=d.IXMAX_VAL/v.IPOW20(f.global_gain);return f.xrpow_max>a?d.LARGE_BITS:(c(_,M,v.IPOW20(f.global_gain),f,b),i.substep_shaping&2&&a0(),this.noquant_count_bits(i,f,b))};function y(i,_,f,b,M,a,t){for(var F=_.big_values,w=0;w<=7+15;w++)b[w]=d.LARGE_BITS;for(var w=0;w<16;w++){var D=i.scalefac_band.l[w+1];if(D>=F)break;var P=0,Z=new I(P),K=A(f,0,D,Z);P=Z.bits;for(var c0=0;c0<8;c0++){var S0=i.scalefac_band.l[w+c0+2];if(S0>=F)break;var m0=P;Z=new I(m0);var n1=A(f,D,S0,Z);m0=Z.bits,b[w+c0]>m0&&(b[w+c0]=m0,M[w+c0]=w,a[w+c0]=K,t[w+c0]=n1)}}}function e(i,_,f,b,M,a,t,F){for(var w=_.big_values,D=2;D<o.SBMAX_l+1;D++){var P=i.scalefac_band.l[D];if(P>=w)break;var Z=M[D-2]+_.count1bits;if(f.part2_3_length<=Z)break;var K=new I(Z),c0=A(b,P,w,K);Z=K.bits,!(f.part2_3_length<=Z)&&(f.assign(_),f.part2_3_length=Z,f.region0_count=a[D-2],f.region1_count=D-2-a[D-2],f.table_select[0]=t[D-2],f.table_select[1]=F[D-2],f.table_select[2]=c0)}}this.best_huffman_divide=function(i,_){var f=new p,b=_.l3_enc,M=T0(7+15+1),a=T0(7+15+1),t=T0(7+15+1),F=T0(7+15+1);if(!(_.block_type==o.SHORT_TYPE&&i.mode_gr==1)){f.assign(_),_.block_type==o.NORM_TYPE&&(y(i,_,b,M,a,t,F),e(i,f,_,b,M,a,t,F));var w=f.big_values;if(!(w==0||(b[w-2]|b[w-1])>1)&&(w=_.count1+2,!(w>576))){f.assign(_),f.count1=w;for(var D=0,P=0;w>f.big_values;w-=4){var Z=((b[w-4]*2+b[w-3])*2+b[w-2])*2+b[w-1];D+=H.t32l[Z],P+=H.t33l[Z]}if(f.big_values=w,f.count1table_select=0,D>P&&(D=P,f.count1table_select=1),f.count1bits=D,f.block_type==o.NORM_TYPE)e(i,f,_,b,M,a,t,F);else{if(f.part2_3_length=D,D=i.scalefac_band.l[7+1],D>w&&(D=w),D>0){var K=new I(f.part2_3_length);f.table_select[0]=A(b,0,D,K),f.part2_3_length=K.bits}if(w>D){var K=new I(f.part2_3_length);f.table_select[1]=A(b,D,w,K),f.part2_3_length=K.bits}_.part2_3_length>f.part2_3_length&&_.assign(f)}}}};var n=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],m=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],C=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],h=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];z0.slen1_tab=C,z0.slen2_tab=h;function l(i,_){for(var f,b=_.tt[1][i],M=_.tt[0][i],a=0;a<H.scfsi_band.length-1;a++){for(f=H.scfsi_band[a];f<H.scfsi_band[a+1]&&!(M.scalefac[f]!=b.scalefac[f]&&b.scalefac[f]>=0);f++);if(f==H.scfsi_band[a+1]){for(f=H.scfsi_band[a];f<H.scfsi_band[a+1];f++)b.scalefac[f]=-1;_.scfsi[i][a]=1}}var t=0,F=0;for(f=0;f<11;f++)b.scalefac[f]!=-1&&(F++,t<b.scalefac[f]&&(t=b.scalefac[f]));for(var w=0,D=0;f<o.SBPSY_l;f++)b.scalefac[f]!=-1&&(D++,w<b.scalefac[f]&&(w=b.scalefac[f]));for(var a=0;a<16;a++)if(t<n[a]&&w<m[a]){var P=C[a]*F+h[a]*D;b.part2_length>P&&(b.part2_length=P,b.scalefac_compress=a)}}this.best_scalefac_store=function(i,_,f,b){var M=b.tt[_][f],a,t,F,w,D=0;for(F=0,a=0;a<M.sfbmax;a++){var P=M.width[a];for(F+=P,w=-P;w<0&&M.l3_enc[w+F]==0;w++);w==0&&(M.scalefac[a]=D=-2)}if(M.scalefac_scale==0&&M.preflag==0){var Z=0;for(a=0;a<M.sfbmax;a++)M.scalefac[a]>0&&(Z|=M.scalefac[a]);if(!(Z&1)&&Z!=0){for(a=0;a<M.sfbmax;a++)M.scalefac[a]>0&&(M.scalefac[a]>>=1);M.scalefac_scale=D=1}}if(M.preflag==0&&M.block_type!=o.SHORT_TYPE&&i.mode_gr==2){for(a=11;a<o.SBPSY_l&&!(M.scalefac[a]<v.pretab[a]&&M.scalefac[a]!=-2);a++);if(a==o.SBPSY_l){for(a=11;a<o.SBPSY_l;a++)M.scalefac[a]>0&&(M.scalefac[a]-=v.pretab[a]);M.preflag=D=1}}for(t=0;t<4;t++)b.scfsi[f][t]=0;for(i.mode_gr==2&&_==1&&b.tt[0][f].block_type!=o.SHORT_TYPE&&b.tt[1][f].block_type!=o.SHORT_TYPE&&(l(f,b),D=0),a=0;a<M.sfbmax;a++)M.scalefac[a]==-2&&(M.scalefac[a]=0);D!=0&&(i.mode_gr==2?this.scale_bitcount(M):this.scale_bitcount_lsf(i,M))};var u=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],s=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],x=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(i){var _,f,b=0,M=0,a,t=i.scalefac;if(i.block_type==o.SHORT_TYPE)a=u,i.mixed_block_flag!=0&&(a=s);else if(a=x,i.preflag==0){for(f=11;f<o.SBPSY_l&&!(t[f]<v.pretab[f]);f++);if(f==o.SBPSY_l)for(i.preflag=1,f=11;f<o.SBPSY_l;f++)t[f]-=v.pretab[f]}for(f=0;f<i.sfbdivide;f++)b<t[f]&&(b=t[f]);for(;f<i.sfbmax;f++)M<t[f]&&(M=t[f]);for(i.part2_length=d.LARGE_BITS,_=0;_<16;_++)b<n[_]&&M<m[_]&&i.part2_length>a[_]&&(i.part2_length=a[_],i.scalefac_compress=_);return i.part2_length==d.LARGE_BITS};var r=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(i,_){var f,b,M,a,t,F,w,D,P=T0(4),Z=_.scalefac;for(_.preflag!=0?f=2:f=0,w=0;w<4;w++)P[w]=0;if(_.block_type==o.SHORT_TYPE){b=1;var K=v.nr_of_sfb_block[f][b];for(D=0,M=0;M<4;M++)for(a=K[M]/3,w=0;w<a;w++,D++)for(t=0;t<3;t++)Z[D*3+t]>P[M]&&(P[M]=Z[D*3+t])}else{b=0;var K=v.nr_of_sfb_block[f][b];for(D=0,M=0;M<4;M++)for(a=K[M],w=0;w<a;w++,D++)Z[D]>P[M]&&(P[M]=Z[D])}for(F=!1,M=0;M<4;M++)P[M]>r[f][M]&&(F=!0);if(!F){var c0,S0,m0,n1;for(_.sfb_partition_table=v.nr_of_sfb_block[f][b],M=0;M<4;M++)_.slen[M]=N[P[M]];switch(c0=_.slen[0],S0=_.slen[1],m0=_.slen[2],n1=_.slen[3],f){case 0:_.scalefac_compress=(c0*5+S0<<4)+(m0<<2)+n1;break;case 1:_.scalefac_compress=400+(c0*5+S0<<2)+m0;break;case 2:_.scalefac_compress=500+c0*3+S0;break}}if(!F)for(_.part2_length=0,M=0;M<4;M++)_.part2_length+=_.slen[M]*_.sfb_partition_table[M];return F};var N=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(i){for(var _=2;_<=576;_+=2){for(var f=0,b;i.scalefac_band.l[++f]<_;);for(b=X[f][0];i.scalefac_band.l[b+1]>_;)b--;for(b<0&&(b=X[f][0]),i.bv_scf[_-2]=b,b=X[f][1];i.scalefac_band.l[b+i.bv_scf[_-2]+2]>_;)b--;b<0&&(b=X[f][1]),i.bv_scf[_-1]=b}}}k0.STEPS_per_dB=100,k0.MAX_dB=120,k0.GAIN_NOT_ENOUGH_SAMPLES=-24601,k0.GAIN_ANALYSIS_ERROR=0,k0.GAIN_ANALYSIS_OK=1,k0.INIT_GAIN_ANALYSIS_ERROR=0,k0.INIT_GAIN_ANALYSIS_OK=1,k0.YULE_ORDER=10,k0.MAX_ORDER=k0.YULE_ORDER,k0.MAX_SAMP_FREQ=48e3,k0.RMS_WINDOW_TIME_NUMERATOR=1,k0.RMS_WINDOW_TIME_DENOMINATOR=20,k0.MAX_SAMPLES_PER_WINDOW=k0.MAX_SAMP_FREQ*k0.RMS_WINDOW_TIME_NUMERATOR/k0.RMS_WINDOW_TIME_DENOMINATOR+1;function k0(){}function J0(){function v(c,L,q,T,Y,B,W,A,y,e,n,m,C,h){this.quant_comp=L,this.quant_comp_s=q,this.safejoint=T,this.nsmsfix=Y,this.st_lrm=B,this.st_s=W,this.nsbass=A,this.scale=y,this.masking_adj=e,this.ath_lower=n,this.ath_curve=m,this.interch=C,this.sfscale=h}var I;this.setModules=function(c){I=c};function X(c,L,q){a0()}var S=[new v(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new v(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new v(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new v(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new v(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new v(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new v(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new v(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new v(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new v(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new v(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new v(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new v(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new v(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new v(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new v(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new v(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function U(c,L,q){var T=L,Y=I.nearestBitrateFullIndex(L);if(c.VBR=z.vbr_abr,c.VBR_mean_bitrate_kbps=T,c.VBR_mean_bitrate_kbps=Math.min(c.VBR_mean_bitrate_kbps,320),c.VBR_mean_bitrate_kbps=Math.max(c.VBR_mean_bitrate_kbps,8),c.brate=c.VBR_mean_bitrate_kbps,c.VBR_mean_bitrate_kbps>320&&(c.disable_reservoir=!0),S[Y].safejoint>0&&(c.exp_nspsytune=c.exp_nspsytune|2),S[Y].sfscale>0&&(c.internal_flags.noise_shaping=2),Math.abs(S[Y].nsbass)>0){var B=int(S[Y].nsbass*4);B<0&&(B+=64),c.exp_nspsytune=c.exp_nspsytune|B<<2}return q!=0?c.quant_comp=S[Y].quant_comp:Math.abs(c.quant_comp- -1)>0||(c.quant_comp=S[Y].quant_comp),q!=0?c.quant_comp_short=S[Y].quant_comp_s:Math.abs(c.quant_comp_short- -1)>0||(c.quant_comp_short=S[Y].quant_comp_s),q!=0?c.msfix=S[Y].nsmsfix:Math.abs(c.msfix- -1)>0||(c.msfix=S[Y].nsmsfix),q!=0?c.internal_flags.nsPsy.attackthre=S[Y].st_lrm:Math.abs(c.internal_flags.nsPsy.attackthre- -1)>0||(c.internal_flags.nsPsy.attackthre=S[Y].st_lrm),q!=0?c.internal_flags.nsPsy.attackthre_s=S[Y].st_s:Math.abs(c.internal_flags.nsPsy.attackthre_s- -1)>0||(c.internal_flags.nsPsy.attackthre_s=S[Y].st_s),q!=0?c.scale=S[Y].scale:Math.abs(c.scale- -1)>0||(c.scale=S[Y].scale),q!=0?c.maskingadjust=S[Y].masking_adj:Math.abs(c.maskingadjust-0)>0||(c.maskingadjust=S[Y].masking_adj),S[Y].masking_adj>0?q!=0?c.maskingadjust_short=S[Y].masking_adj*.9:Math.abs(c.maskingadjust_short-0)>0||(c.maskingadjust_short=S[Y].masking_adj*.9):q!=0?c.maskingadjust_short=S[Y].masking_adj*1.1:Math.abs(c.maskingadjust_short-0)>0||(c.maskingadjust_short=S[Y].masking_adj*1.1),q!=0?c.ATHlower=-S[Y].ath_lower/10:Math.abs(-c.ATHlower*10-0)>0||(c.ATHlower=-S[Y].ath_lower/10),q!=0?c.ATHcurve=S[Y].ath_curve:Math.abs(c.ATHcurve- -1)>0||(c.ATHcurve=S[Y].ath_curve),q!=0?c.interChRatio=S[Y].interch:Math.abs(c.interChRatio- -1)>0||(c.interChRatio=S[Y].interch),L}this.apply_preset=function(c,L,q){switch(L){case t0.R3MIX:{L=t0.V3,c.VBR=z.vbr_mtrh;break}case t0.MEDIUM:{L=t0.V4,c.VBR=z.vbr_rh;break}case t0.MEDIUM_FAST:{L=t0.V4,c.VBR=z.vbr_mtrh;break}case t0.STANDARD:{L=t0.V2,c.VBR=z.vbr_rh;break}case t0.STANDARD_FAST:{L=t0.V2,c.VBR=z.vbr_mtrh;break}case t0.EXTREME:{L=t0.V0,c.VBR=z.vbr_rh;break}case t0.EXTREME_FAST:{L=t0.V0,c.VBR=z.vbr_mtrh;break}case t0.INSANE:return L=320,c.preset=L,U(c,L,q),c.VBR=z.vbr_off,L}switch(c.preset=L,L){case t0.V9:return X(),L;case t0.V8:return X(),L;case t0.V7:return X(),L;case t0.V6:return X(),L;case t0.V5:return X(),L;case t0.V4:return X(),L;case t0.V3:return X(),L;case t0.V2:return X(),L;case t0.V1:return X(),L;case t0.V0:return X(),L}return 8<=L&&L<=320?U(c,L,q):(c.preset=0,L)}}function U0(){var v;this.setModules=function(I){v=I},this.ResvFrameBegin=function(I,X){var S=I.internal_flags,U,c=S.l3_side,L=v.getframebits(I);X.bits=(L-S.sideinfo_len*8)/S.mode_gr;var q=8*256*S.mode_gr-8;I.brate>320?a0():(U=8*1440,I.strict_ISO&&a0()),S.ResvMax=U-L,S.ResvMax>q&&(S.ResvMax=q),(S.ResvMax<0||I.disable_reservoir)&&(S.ResvMax=0);var T=X.bits*S.mode_gr+Math.min(S.ResvSize,S.ResvMax);return T>U&&(T=U),c.resvDrain_pre=0,S.pinfo!=null&&a0(),T},this.ResvMaxBits=function(I,X,S,U){var c=I.internal_flags,L,q=c.ResvSize,T=c.ResvMax;U!=0&&(q+=X),c.substep_shaping&1&&(T*=.9),S.bits=X,q*10>T*9?(L=q-T*9/10,S.bits+=L,c.substep_shaping|=128):(L=0,c.substep_shaping&=127,!I.disable_reservoir&&!(c.substep_shaping&1)&&(S.bits-=.1*X));var Y=q<c.ResvMax*6/10?q:c.ResvMax*6/10;return Y-=L,Y<0&&(Y=0),Y},this.ResvAdjust=function(I,X){I.ResvSize-=X.part2_3_length+X.part2_length},this.ResvFrameEnd=function(I,X){var S,U=I.l3_side;I.ResvSize+=X*I.mode_gr;var c=0;U.resvDrain_post=0,U.resvDrain_pre=0,(S=I.ResvSize%8)!=0&&(c+=S),S=I.ResvSize-c-I.ResvMax,S>0&&(c+=S);{var L=Math.min(U.main_data_begin*8,c)/8;U.resvDrain_pre+=8*L,c-=8*L,I.ResvSize-=8*L,U.main_data_begin-=L}U.resvDrain_post+=c,I.ResvSize-=c}}y0.NUMTOCENTRIES=100,y0.MAXFRAMESIZE=2880;function y0(){this.setModules=function(X,S,U){};var v=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function I(X,S){var U=S^X;return S=S>>8^v[U&255],S}this.updateMusicCRC=function(X,S,U,c){for(var L=0;L<c;++L)X[0]=I(S[U+L],X[0])}}L0.EQ=function(v,I){return Math.abs(v)>Math.abs(I)?Math.abs(v-I)<=Math.abs(v)*1e-6:Math.abs(v-I)<=Math.abs(I)*1e-6},L0.NEQ=function(v,I){return!L0.EQ(v,I)};function L0(){var v=this,I=null,X=null;this.setModules=function(l,u,s,x){I=s,X=x};var S=null,U=0,c=0,L=0;this.getframebits=function(l){var u=l.internal_flags,s;u.bitrate_index!=0?s=H.bitrate_table[l.version][u.bitrate_index]:s=l.brate;var x=0|(l.version+1)*72e3*s/l.out_samplerate+u.padding;return 8*x};function q(l){g.arraycopy(l.header[l.w_ptr].buf,0,S,c,l.sideinfo_len),c+=l.sideinfo_len,U+=l.sideinfo_len*8,l.w_ptr=l.w_ptr+1&b0.MAX_HEADER_BUF-1}function T(l,u,s){for(;s>0;){var x;L==0&&(L=8,c++,l.header[l.w_ptr].write_timing==U&&q(l),S[c]=0),x=Math.min(s,L),s-=x,L-=x,S[c]|=u>>s<<L,U+=x}}function Y(l,u){var s=l.internal_flags,x;if(u>=8&&(T(s,76,8),u-=8),u>=8&&(T(s,65,8),u-=8),u>=8&&(T(s,77,8),u-=8),u>=8&&(T(s,69,8),u-=8),u>=32){var r=I.getLameShortVersion();if(u>=32)for(x=0;x<r.length&&u>=8;++x)u-=8,T(s,r.charCodeAt(x),8)}for(;u>=1;u-=1)T(s,s.ancillary_flag,1),s.ancillary_flag^=l.disable_reservoir?0:1}function B(l,u,s){for(var x=l.header[l.h_ptr].ptr;s>0;){var r=Math.min(s,8-(x&7));s-=r,l.header[l.h_ptr].buf[x>>3]|=u>>s<<8-(x&7)-r,x+=r}l.header[l.h_ptr].ptr=x}function W(l,u){var s=l.internal_flags,x,r,N;if(x=s.l3_side,s.header[s.h_ptr].ptr=0,S1.fill(s.header[s.h_ptr].buf,0,s.sideinfo_len,0),l.out_samplerate<16e3?B(s,4094,12):B(s,4095,12),B(s,l.version,1),B(s,4-3,2),B(s,l.error_protection?0:1,1),B(s,s.bitrate_index,4),B(s,s.samplerate_index,2),B(s,s.padding,1),B(s,l.extension,1),B(s,l.mode.ordinal(),2),B(s,s.mode_ext,2),B(s,l.copyright,1),B(s,l.original,1),B(s,l.emphasis,2),l.error_protection&&B(s,0,16),l.version==1){for(B(s,x.main_data_begin,9),s.channels_out==2?B(s,x.private_bits,3):B(s,x.private_bits,5),N=0;N<s.channels_out;N++){var i;for(i=0;i<4;i++)B(s,x.scfsi[N][i],1)}for(r=0;r<2;r++)for(N=0;N<s.channels_out;N++){var _=x.tt[r][N];B(s,_.part2_3_length+_.part2_length,12),B(s,_.big_values/2,9),B(s,_.global_gain,8),B(s,_.scalefac_compress,4),_.block_type!=o.NORM_TYPE?(B(s,1,1),B(s,_.block_type,2),B(s,_.mixed_block_flag,1),_.table_select[0]==14&&(_.table_select[0]=16),B(s,_.table_select[0],5),_.table_select[1]==14&&(_.table_select[1]=16),B(s,_.table_select[1],5),B(s,_.subblock_gain[0],3),B(s,_.subblock_gain[1],3),B(s,_.subblock_gain[2],3)):(B(s,0,1),_.table_select[0]==14&&(_.table_select[0]=16),B(s,_.table_select[0],5),_.table_select[1]==14&&(_.table_select[1]=16),B(s,_.table_select[1],5),_.table_select[2]==14&&(_.table_select[2]=16),B(s,_.table_select[2],5),B(s,_.region0_count,4),B(s,_.region1_count,3)),B(s,_.preflag,1),B(s,_.scalefac_scale,1),B(s,_.count1table_select,1)}}else for(B(s,x.main_data_begin,8),B(s,x.private_bits,s.channels_out),r=0,N=0;N<s.channels_out;N++){var _=x.tt[r][N];B(s,_.part2_3_length+_.part2_length,12),B(s,_.big_values/2,9),B(s,_.global_gain,8),B(s,_.scalefac_compress,9),_.block_type!=o.NORM_TYPE?(B(s,1,1),B(s,_.block_type,2),B(s,_.mixed_block_flag,1),_.table_select[0]==14&&(_.table_select[0]=16),B(s,_.table_select[0],5),_.table_select[1]==14&&(_.table_select[1]=16),B(s,_.table_select[1],5),B(s,_.subblock_gain[0],3),B(s,_.subblock_gain[1],3),B(s,_.subblock_gain[2],3)):(B(s,0,1),_.table_select[0]==14&&(_.table_select[0]=16),B(s,_.table_select[0],5),_.table_select[1]==14&&(_.table_select[1]=16),B(s,_.table_select[1],5),_.table_select[2]==14&&(_.table_select[2]=16),B(s,_.table_select[2],5),B(s,_.region0_count,4),B(s,_.region1_count,3)),B(s,_.scalefac_scale,1),B(s,_.count1table_select,1)}l.error_protection&&a0();{var f=s.h_ptr;s.h_ptr=f+1&b0.MAX_HEADER_BUF-1,s.header[s.h_ptr].write_timing=s.header[f].write_timing+u,s.h_ptr==s.w_ptr}}function A(l,u){var s=H.ht[u.count1table_select+32],x,r=0,N=u.big_values,i=u.big_values;for(x=(u.count1-u.big_values)/4;x>0;--x){var _=0,f=0,b;b=u.l3_enc[N+0],b!=0&&(f+=8,u.xr[i+0]<0&&_++),b=u.l3_enc[N+1],b!=0&&(f+=4,_*=2,u.xr[i+1]<0&&_++),b=u.l3_enc[N+2],b!=0&&(f+=2,_*=2,u.xr[i+2]<0&&_++),b=u.l3_enc[N+3],b!=0&&(f++,_*=2,u.xr[i+3]<0&&_++),N+=4,i+=4,T(l,_+s.table[f],s.hlen[f]),r+=s.hlen[f]}return r}function y(l,u,s,x,r){var N=H.ht[u],i=0;if(u==0)return i;for(var _=s;_<x;_+=2){var f=0,b=0,M=N.xlen,a=N.xlen,t=0,F=r.l3_enc[_],w=r.l3_enc[_+1];if(F!=0&&(r.xr[_]<0&&t++,f--),u>15){if(F>14){var D=F-15;t|=D<<1,b=M,F=15}if(w>14){var P=w-15;t<<=M,t|=P,b+=M,w=15}a=16}w!=0&&(t<<=1,r.xr[_+1]<0&&t++,f--),F=F*a+w,b-=f,f+=N.hlen[F],T(l,N.table[F],f),T(l,t,b),i+=f+b}return i}function e(l,u){var s=3*l.scalefac_band.s[3];s>u.big_values&&(s=u.big_values);var x=y(l,u.table_select[0],0,s,u);return x+=y(l,u.table_select[1],s,u.big_values,u),x}function n(l,u){var s,x,r,N;s=u.big_values;var i=u.region0_count+1;return r=l.scalefac_band.l[i],i+=u.region1_count+1,N=l.scalefac_band.l[i],r>s&&(r=s),N>s&&(N=s),x=y(l,u.table_select[0],0,r,u),x+=y(l,u.table_select[1],r,N,u),x+=y(l,u.table_select[2],N,s,u),x}function m(l){var u,s,x,r,N=0,i=l.internal_flags,_=i.l3_side;if(l.version==1)for(u=0;u<2;u++)for(s=0;s<i.channels_out;s++){var f=_.tt[u][s],b=z0.slen1_tab[f.scalefac_compress],M=z0.slen2_tab[f.scalefac_compress];for(r=0,x=0;x<f.sfbdivide;x++)f.scalefac[x]!=-1&&(T(i,f.scalefac[x],b),r+=b);for(;x<f.sfbmax;x++)f.scalefac[x]!=-1&&(T(i,f.scalefac[x],M),r+=M);f.block_type==o.SHORT_TYPE?r+=e(i,f):r+=n(i,f),r+=A(i,f),N+=r}else for(u=0,s=0;s<i.channels_out;s++){var f=_.tt[u][s],a,t,F=0;if(r=0,x=0,t=0,f.block_type==o.SHORT_TYPE){for(;t<4;t++){var w=f.sfb_partition_table[t]/3,D=f.slen[t];for(a=0;a<w;a++,x++)T(i,Math.max(f.scalefac[x*3+0],0),D),T(i,Math.max(f.scalefac[x*3+1],0),D),T(i,Math.max(f.scalefac[x*3+2],0),D),F+=3*D}r+=e(i,f)}else{for(;t<4;t++){var w=f.sfb_partition_table[t],D=f.slen[t];for(a=0;a<w;a++,x++)T(i,Math.max(f.scalefac[x],0),D),F+=D}r+=n(i,f)}r+=A(i,f),N+=F+r}return N}function C(){this.total=0}function h(l,u){var s=l.internal_flags,x,r,N;return s.w_ptr,N=s.h_ptr-1,N==-1&&(N=b0.MAX_HEADER_BUF-1),x=s.header[N].write_timing-U,u.total=x,x>=0&&a0(),r=v.getframebits(l),x+=r,u.total+=r,u.total%8!=0?u.total=1+u.total/8:u.total=u.total/8,u.total+=c+1,x}this.flush_bitstream=function(l){var u=l.internal_flags,s,x;u.h_ptr-1,s=u.l3_side,!((x=h(l,new C))<0)&&(Y(l,x),u.ResvSize=0,s.main_data_begin=0,u.findReplayGain&&a0(),u.findPeakSample&&a0())},this.format_bitstream=function(l){var u=l.internal_flags,s;s=u.l3_side;var x=this.getframebits(l);Y(l,s.resvDrain_pre),W(l,x);var r=8*u.sideinfo_len;if(r+=m(l),Y(l,s.resvDrain_post),r+=s.resvDrain_post,s.main_data_begin+=(x-r)/8,h(l,new C)!=u.ResvSize,s.main_data_begin*8!=u.ResvSize&&(u.ResvSize=s.main_data_begin*8),U>1e9){var N;for(N=0;N<b0.MAX_HEADER_BUF;++N)u.header[N].write_timing-=U;U=0}return 0},this.copy_buffer=function(l,u,s,x,r){var N=c+1;if(N<=0)return 0;if(x!=0&&N>x)return-1;if(g.arraycopy(S,0,u,s,N),c=-1,L=0,r!=0){var i=T0(1);i[0]=l.nMusicCRC,X.updateMusicCRC(i,u,s,N),l.nMusicCRC=i[0],N>0&&(l.VBR_seek_table.nBytesWritten+=N),l.decode_on_the_fly&&a0()}return N},this.init_bit_stream_w=function(l){S=x1(t0.LAME_MAXMP3BUFFER),l.h_ptr=l.w_ptr=0,l.header[l.h_ptr].write_timing=0,c=-1,L=0,U=0}}function u0(v,I,X,S){this.xlen=v,this.linmax=I,this.table=X,this.hlen=S}var H={};H.t1HB=[1,1,1,0],H.t2HB=[1,2,1,3,1,1,3,2,0],H.t3HB=[3,2,1,1,1,1,3,2,0],H.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],H.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],H.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],H.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],H.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],H.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],H.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],H.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],H.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],H.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],H.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],H.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],H.t32HB=[1<<0,5<<1,4<<1,5<<2,6<<1,5<<2,4<<2,4<<3,7<<1,3<<2,6<<2,0<<3,7<<2,2<<3,3<<3,1<<4],H.t33HB=[15<<0,14<<1,13<<1,12<<2,11<<1,10<<2,9<<2,8<<3,7<<1,6<<2,5<<2,4<<3,3<<2,2<<3,1<<3,0<<4],H.t1l=[1,4,3,5],H.t2l=[1,4,7,4,5,7,6,7,8],H.t3l=[2,3,7,4,4,7,6,7,8],H.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],H.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],H.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],H.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],H.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],H.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],H.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],H.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],H.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],H.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],H.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],H.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],H.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],H.t32l=[1+0,4+1,4+1,5+2,4+1,6+2,5+2,6+3,4+1,5+2,5+2,6+3,5+2,6+3,6+3,6+4],H.t33l=[4+0,4+1,4+1,4+2,4+1,4+2,4+2,4+3,4+1,4+2,4+2,4+3,4+2,4+3,4+3,4+4],H.ht=[new u0(0,0,null,null),new u0(2,0,H.t1HB,H.t1l),new u0(3,0,H.t2HB,H.t2l),new u0(3,0,H.t3HB,H.t3l),new u0(0,0,null,null),new u0(4,0,H.t5HB,H.t5l),new u0(4,0,H.t6HB,H.t6l),new u0(6,0,H.t7HB,H.t7l),new u0(6,0,H.t8HB,H.t8l),new u0(6,0,H.t9HB,H.t9l),new u0(8,0,H.t10HB,H.t10l),new u0(8,0,H.t11HB,H.t11l),new u0(8,0,H.t12HB,H.t12l),new u0(16,0,H.t13HB,H.t13l),new u0(0,0,null,H.t16_5l),new u0(16,0,H.t15HB,H.t15l),new u0(1,1,H.t16HB,H.t16l),new u0(2,3,H.t16HB,H.t16l),new u0(3,7,H.t16HB,H.t16l),new u0(4,15,H.t16HB,H.t16l),new u0(6,63,H.t16HB,H.t16l),new u0(8,255,H.t16HB,H.t16l),new u0(10,1023,H.t16HB,H.t16l),new u0(13,8191,H.t16HB,H.t16l),new u0(4,15,H.t24HB,H.t24l),new u0(5,31,H.t24HB,H.t24l),new u0(6,63,H.t24HB,H.t24l),new u0(7,127,H.t24HB,H.t24l),new u0(8,255,H.t24HB,H.t24l),new u0(9,511,H.t24HB,H.t24l),new u0(11,2047,H.t24HB,H.t24l),new u0(13,8191,H.t24HB,H.t24l),new u0(0,0,H.t32HB,H.t32l),new u0(0,0,H.t33HB,H.t33l)],H.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],H.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],H.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],H.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],H.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],H.scfsi_band=[0,6,11,16,21];function h1(v){this.bits=v}function o1(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}function I0(){this.setModules=function(v,I){}}function f1(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=h0(o.SBMAX_l),this.s=h0(o.SBMAX_s),this.psfb21=h0(o.PSFB21),this.psfb12=h0(o.PSFB12),this.cb_l=h0(o.CBANDS),this.cb_s=h0(o.CBANDS),this.eql_w=h0(o.BLKSIZE/2)}function u1(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=x0.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}function i1(v){var I=v;this.quantize=I,this.iteration_loop=function(X,S,U,c){var L=X.internal_flags,q=h0(k.SFBMAX),T=h0(576),Y=T0(2),B=0,W=L.l3_side,A=new h1(B);this.quantize.rv.ResvFrameBegin(X,A),B=A.bits;for(var y=0;y<L.mode_gr;y++){this.quantize.qupvt.on_pe(X,S,Y,B,y,y),L.mode_ext==o.MPG_MD_MS_LR&&a0();for(var e=0;e<L.channels_out;e++){var n,m,C=W.tt[y][e];C.block_type!=o.SHORT_TYPE?(n=0,m=L.PSY.mask_adjust-n):(n=0,m=L.PSY.mask_adjust_short-n),L.masking_lower=Math.pow(10,m*.1),this.quantize.init_outer_loop(L,C),this.quantize.init_xrpow(L,C,T)&&(this.quantize.qupvt.calc_xmin(X,c[y][e],C,q),this.quantize.outer_loop(X,C,q,T,e,Y[e])),this.quantize.iteration_finish_one(L,y,e)}}this.quantize.rv.ResvFrameEnd(L,B)}}function s0(){}function l1(v,I,X,S){this.l=T0(1+o.SBMAX_l),this.s=T0(1+o.SBMAX_s),this.psfb21=T0(1+o.PSFB21),this.psfb12=T0(1+o.PSFB12);var U=this.l,c=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],g.arraycopy(this.arrL,0,U,0,Math.min(this.arrL.length,this.l.length)),g.arraycopy(this.arrS,0,c,0,Math.min(this.arrS.length,this.s.length)),g.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),g.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}d.Q_MAX=256+1,d.Q_MAX2=116,d.LARGE_BITS=1e5,d.IXMAX_VAL=8206;function d(){var v=null,I=null,X=null;this.setModules=function(h,l,u){v=h,I=l,X=u};function S(h){return W[h+d.Q_MAX2]}this.IPOW20=function(h){return A[h]};var U=2220446049250313e-31,c=d.IXMAX_VAL,L=c+2,q=d.Q_MAX,T=d.Q_MAX2,Y=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var B=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=B,this.sfBandIndex=[new l1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new l1([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new l1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new l1([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new l1([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new l1([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new l1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new l1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new l1([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var W=h0(q+T+1),A=h0(q),y=h0(L),e=h0(L);this.adj43=e;function n(h,l){var u=X.ATHformula(l,h);return u-=Y,u=Math.pow(10,u/10+h.ATHlower),u}function m(h){for(var l=h.internal_flags.ATH.l,u=h.internal_flags.ATH.psfb21,s=h.internal_flags.ATH.s,x=h.internal_flags.ATH.psfb12,r=h.internal_flags,N=h.out_samplerate,i=0;i<o.SBMAX_l;i++){var _=r.scalefac_band.l[i],f=r.scalefac_band.l[i+1];l[i]=O0.MAX_VALUE;for(var b=_;b<f;b++){var M=b*N/1152,a=n(h,M);l[i]=Math.min(l[i],a)}}for(var i=0;i<o.PSFB21;i++){var _=r.scalefac_band.psfb21[i],f=r.scalefac_band.psfb21[i+1];u[i]=O0.MAX_VALUE;for(var b=_;b<f;b++){var M=b*N/1152,a=n(h,M);u[i]=Math.min(u[i],a)}}for(var i=0;i<o.SBMAX_s;i++){var _=r.scalefac_band.s[i],f=r.scalefac_band.s[i+1];s[i]=O0.MAX_VALUE;for(var b=_;b<f;b++){var M=b*N/384,a=n(h,M);s[i]=Math.min(s[i],a)}s[i]*=r.scalefac_band.s[i+1]-r.scalefac_band.s[i]}for(var i=0;i<o.PSFB12;i++){var _=r.scalefac_band.psfb12[i],f=r.scalefac_band.psfb12[i+1];x[i]=O0.MAX_VALUE;for(var b=_;b<f;b++){var M=b*N/384,a=n(h,M);x[i]=Math.min(x[i],a)}x[i]*=r.scalefac_band.s[13]-r.scalefac_band.s[12]}h.noATH&&a0(),r.ATH.floor=10*e1(n(h,-1))}this.iteration_init=function(h){var l=h.internal_flags,u=l.l3_side,s;if(l.iteration_init_init==0){for(l.iteration_init_init=1,u.main_data_begin=0,m(h),y[0]=0,s=1;s<L;s++)y[s]=Math.pow(s,4/3);for(s=0;s<L-1;s++)e[s]=s+1-Math.pow(.5*(y[s]+y[s+1]),.75);for(e[s]=.5,s=0;s<q;s++)A[s]=Math.pow(2,(s-210)*-.1875);for(s=0;s<=q+T;s++)W[s]=Math.pow(2,(s-210-T)*.25);v.huffman_init(l);{var x,r,N,i;for(s=h.exp_nspsytune>>2&63,s>=32&&(s-=64),x=Math.pow(10,s/4/10),s=h.exp_nspsytune>>8&63,s>=32&&(s-=64),r=Math.pow(10,s/4/10),s=h.exp_nspsytune>>14&63,s>=32&&(s-=64),N=Math.pow(10,s/4/10),s=h.exp_nspsytune>>20&63,s>=32&&(s-=64),i=N*Math.pow(10,s/4/10),s=0;s<o.SBMAX_l;s++){var _;s<=6?_=x:s<=13?_=r:s<=20?_=N:_=i,l.nsPsy.longfact[s]=_}for(s=0;s<o.SBMAX_s;s++){var _;s<=5?_=x:s<=10?_=r:s<=11?_=N:_=i,l.nsPsy.shortfact[s]=_}}}},this.on_pe=function(h,l,u,s,x,r){var N=h.internal_flags,i=0,_,f=T0(2),b,M=new h1(i),a=I.ResvMaxBits(h,s,M,r);i=M.bits;var t=i+a;for(t>b0.MAX_BITS_PER_GRANULE&&(t=b0.MAX_BITS_PER_GRANULE),_=0,b=0;b<N.channels_out;++b)u[b]=Math.min(b0.MAX_BITS_PER_CHANNEL,i/N.channels_out),f[b]=0|u[b]*l[x][b]/700-u[b],f[b]>s*3/4&&(f[b]=s*3/4),f[b]<0&&(f[b]=0),f[b]+u[b]>b0.MAX_BITS_PER_CHANNEL&&(f[b]=Math.max(0,b0.MAX_BITS_PER_CHANNEL-u[b])),_+=f[b];if(_>a)for(b=0;b<N.channels_out;++b)f[b]=a*f[b]/_;for(b=0;b<N.channels_out;++b)u[b]+=f[b],a-=f[b];for(_=0,b=0;b<N.channels_out;++b)_+=u[b];return _>b0.MAX_BITS_PER_GRANULE&&a0(),t},this.athAdjust=function(h,l,u){var s=90.30873362,x=94.82444863,r=v0.FAST_LOG10_X(l,10),N=h*h,i=0;return r-=u,N>1e-20&&(i=1+v0.FAST_LOG10_X(N,10/s)),i<0&&(i=0),r*=i,r+=u+s-x,Math.pow(10,.1*r)},this.calc_xmin=function(h,l,u,s){var x=0,r=h.internal_flags,N,i=0,_=0,f=r.ATH,b=u.xr,M=h.VBR==z.vbr_mtrh?1:0,a=r.masking_lower;for((h.VBR==z.vbr_mtrh||h.VBR==z.vbr_mt)&&(a=1),N=0;N<u.psy_lmax;N++){var t,F,w,D,P,Z;h.VBR==z.vbr_rh||h.VBR==z.vbr_mtrh?F=athAdjust(f.adjust,f.l[N],f.floor):F=f.adjust*f.l[N],P=u.width[N],w=F/P,D=U,Z=P>>1,t=0;do{var K,c0;K=b[i]*b[i],t+=K,D+=K<w?K:w,i++,c0=b[i]*b[i],t+=c0,D+=c0<w?c0:w,i++}while(--Z>0);if(t>F&&_++,N==o.SBPSY_l&&a0(),M!=0&&(F=D),!h.ATHonly){var S0=l.en.l[N];if(S0>0){var m0;m0=t*l.thm.l[N]*a/S0,M!=0&&(m0*=r.nsPsy.longfact[N]),F<m0&&(F=m0)}}M!=0?s[x++]=F:s[x++]=F*r.nsPsy.longfact[N]}var n1=575;if(u.block_type!=o.SHORT_TYPE)for(var s1=576;s1--!=0&&L0.EQ(b[s1],0);)n1=s1;u.max_nonzero_coeff=n1;for(var K0=u.sfb_smin;N<u.psymax;K0++,N+=3){var P,t1,c1;for(h.VBR==z.vbr_rh||h.VBR==z.vbr_mtrh?c1=athAdjust(f.adjust,f.s[K0],f.floor):c1=f.adjust*f.s[K0],P=u.width[N],t1=0;t1<3;t1++){var t=0,F,w,D,Z=P>>1;w=c1/P,D=U;do{var K,c0;K=b[i]*b[i],t+=K,D+=K<w?K:w,i++,c0=b[i]*b[i],t+=c0,D+=c0<w?c0:w,i++}while(--Z>0);if(t>c1&&_++,K0==o.SBPSY_s&&a0(),M!=0?F=D:F=c1,!h.ATHonly&&!h.ATHshort){var S0=l.en.s[K0][t1];if(S0>0){var m0;m0=t*l.thm.s[K0][t1]*a/S0,M!=0&&(m0*=r.nsPsy.shortfact[K0]),F<m0&&(F=m0)}}M!=0?s[x++]=F:s[x++]=F*r.nsPsy.shortfact[K0]}h.useTemporal&&(s[x-3]>s[x-3+1]&&(s[x-3+1]+=(s[x-3]-s[x-3+1])*r.decay),s[x-3+1]>s[x-3+2]&&(s[x-3+2]+=(s[x-3+1]-s[x-3+2])*r.decay))}return _};function C(h){this.s=h}this.calc_noise_core=function(h,l,u,s){var x=0,r=l.s,N=h.l3_enc;if(r>h.count1)for(;u--!=0;){var i;i=h.xr[r],r++,x+=i*i,i=h.xr[r],r++,x+=i*i}else if(r>h.big_values){var _=h0(2);for(_[0]=0,_[1]=s;u--!=0;){var i;i=Math.abs(h.xr[r])-_[N[r]],r++,x+=i*i,i=Math.abs(h.xr[r])-_[N[r]],r++,x+=i*i}}else for(;u--!=0;){var i;i=Math.abs(h.xr[r])-y[N[r]]*s,r++,x+=i*i,i=Math.abs(h.xr[r])-y[N[r]]*s,r++,x+=i*i}return l.s=r,x},this.calc_noise=function(h,l,u,s,x){var r=0,N=0,i,_,f=0,b=0,M=0,a=-20,t=0,F=h.scalefac,w=0;for(s.over_SSD=0,i=0;i<h.psymax;i++){var D=h.global_gain-(F[w++]+(h.preflag!=0?B[i]:0)<<h.scalefac_scale+1)-h.subblock_gain[h.window[i]]*8,P=0;if(x!=null&&x.step[i]==D)P=x.noise[i],t+=h.width[i],u[r++]=P/l[N++],P=x.noise_log[i];else{var Z=S(D);if(_=h.width[i]>>1,t+h.width[i]>h.max_nonzero_coeff){var K;K=h.max_nonzero_coeff-t+1,K>0?_=K>>1:_=0}var c0=new C(t);P=this.calc_noise_core(h,c0,_,Z),t=c0.s,x!=null&&(x.step[i]=D,x.noise[i]=P),P=u[r++]=P/l[N++],P=v0.FAST_LOG10(Math.max(P,1e-20)),x!=null&&(x.noise_log[i]=P)}if(x!=null&&(x.global_gain=h.global_gain),M+=P,P>0){var S0;S0=Math.max(0|P*10+.5,1),s.over_SSD+=S0*S0,f++,b+=P}a=Math.max(a,P)}return s.over_count=f,s.tot_noise=M,s.over_noise=b,s.max_noise=a,f}}function E(){this.global_gain=0,this.sfb_count1=0,this.step=T0(39),this.noise=h0(39),this.noise_log=h0(39)}function p(){this.xr=h0(576),this.l3_enc=T0(576),this.scalefac=T0(k.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=T0(3),this.subblock_gain=T0(3+1),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=T0(k.SFBMAX),this.window=T0(k.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=T0(4),this.max_nonzero_coeff=0;var v=this;function I(S){return new Int32Array(S)}function X(S){return new Float32Array(S)}this.assign=function(S){v.xr=X(S.xr),v.l3_enc=I(S.l3_enc),v.scalefac=I(S.scalefac),v.xrpow_max=S.xrpow_max,v.part2_3_length=S.part2_3_length,v.big_values=S.big_values,v.count1=S.count1,v.global_gain=S.global_gain,v.scalefac_compress=S.scalefac_compress,v.block_type=S.block_type,v.mixed_block_flag=S.mixed_block_flag,v.table_select=I(S.table_select),v.subblock_gain=I(S.subblock_gain),v.region0_count=S.region0_count,v.region1_count=S.region1_count,v.preflag=S.preflag,v.scalefac_scale=S.scalefac_scale,v.count1table_select=S.count1table_select,v.part2_length=S.part2_length,v.sfb_lmax=S.sfb_lmax,v.sfb_smin=S.sfb_smin,v.psy_lmax=S.psy_lmax,v.sfbmax=S.sfbmax,v.psymax=S.psymax,v.sfbdivide=S.sfbdivide,v.width=I(S.width),v.window=I(S.window),v.count1bits=S.count1bits,v.sfb_partition_table=S.sfb_partition_table.slice(0),v.slen=I(S.slen),v.max_nonzero_coeff=S.max_nonzero_coeff}}var k={};k.SFBMAX=o.SBMAX_s*3;function j(){this.rv=null;var v;this.qupvt=null;var I,X=new I0,S;this.setModules=function(e,n,m,C){v=n,this.rv=n,I=m,this.qupvt=m,S=C,X.setModules(I,S)};function U(e,n,m,C){C=0;for(var h=0;h<=m;++h){var l=Math.abs(e.xr[h]);C+=l,n[h]=Math.sqrt(l*Math.sqrt(l)),n[h]>e.xrpow_max&&(e.xrpow_max=n[h])}return C}this.init_xrpow=function(e,n,m){var C=0,h=0|n.max_nonzero_coeff;if(n.xrpow_max=0,S1.fill(m,h,576,0),C=U(n,m,h,C),C>1e-20){var l=0;e.substep_shaping&2&&(l=1);for(var u=0;u<n.psymax;u++)e.pseudohalf[u]=l;return!0}return S1.fill(n.l3_enc,0,576,0),!1};function c(e,n){var m=e.ATH,C=n.xr;if(n.block_type!=o.SHORT_TYPE)for(var h=!1,l=o.PSFB21-1;l>=0&&!h;l--){var u=e.scalefac_band.psfb21[l],s=e.scalefac_band.psfb21[l+1],x=I.athAdjust(m.adjust,m.psfb21[l],m.floor);e.nsPsy.longfact[21]>1e-12&&(x*=e.nsPsy.longfact[21]);for(var r=s-1;r>=u;r--)if(Math.abs(C[r])<x)C[r]=0;else{h=!0;break}}else for(var N=0;N<3;N++)for(var h=!1,l=o.PSFB12-1;l>=0&&!h;l--){var u=e.scalefac_band.s[12]*3+(e.scalefac_band.s[13]-e.scalefac_band.s[12])*N+(e.scalefac_band.psfb12[l]-e.scalefac_band.psfb12[0]),s=u+(e.scalefac_band.psfb12[l+1]-e.scalefac_band.psfb12[l]),i=I.athAdjust(m.adjust,m.psfb12[l],m.floor);e.nsPsy.shortfact[12]>1e-12&&(i*=e.nsPsy.shortfact[12]);for(var r=s-1;r>=u;r--)if(Math.abs(C[r])<i)C[r]=0;else{h=!0;break}}}this.init_outer_loop=function(e,n){n.part2_3_length=0,n.big_values=0,n.count1=0,n.global_gain=210,n.scalefac_compress=0,n.table_select[0]=0,n.table_select[1]=0,n.table_select[2]=0,n.subblock_gain[0]=0,n.subblock_gain[1]=0,n.subblock_gain[2]=0,n.subblock_gain[3]=0,n.region0_count=0,n.region1_count=0,n.preflag=0,n.scalefac_scale=0,n.count1table_select=0,n.part2_length=0,n.sfb_lmax=o.SBPSY_l,n.sfb_smin=o.SBPSY_s,n.psy_lmax=e.sfb21_extra?o.SBMAX_l:o.SBPSY_l,n.psymax=n.psy_lmax,n.sfbmax=n.sfb_lmax,n.sfbdivide=11;for(var m=0;m<o.SBMAX_l;m++)n.width[m]=e.scalefac_band.l[m+1]-e.scalefac_band.l[m],n.window[m]=3;if(n.block_type==o.SHORT_TYPE){var C=h0(576);n.sfb_smin=0,n.sfb_lmax=0,n.mixed_block_flag!=0&&a0(),n.psymax=n.sfb_lmax+3*((e.sfb21_extra?o.SBMAX_s:o.SBPSY_s)-n.sfb_smin),n.sfbmax=n.sfb_lmax+3*(o.SBPSY_s-n.sfb_smin),n.sfbdivide=n.sfbmax-18,n.psy_lmax=n.sfb_lmax;var h=e.scalefac_band.l[n.sfb_lmax];g.arraycopy(n.xr,0,C,0,576);for(var m=n.sfb_smin;m<o.SBMAX_s;m++)for(var l=e.scalefac_band.s[m],u=e.scalefac_band.s[m+1],s=0;s<3;s++)for(var x=l;x<u;x++)n.xr[h++]=C[3*x+s];for(var r=n.sfb_lmax,m=n.sfb_smin;m<o.SBMAX_s;m++)n.width[r]=n.width[r+1]=n.width[r+2]=e.scalefac_band.s[m+1]-e.scalefac_band.s[m],n.window[r]=0,n.window[r+1]=1,n.window[r+2]=2,r+=3}n.count1bits=0,n.sfb_partition_table=I.nr_of_sfb_block[0][0],n.slen[0]=0,n.slen[1]=0,n.slen[2]=0,n.slen[3]=0,n.max_nonzero_coeff=575,S1.fill(n.scalefac,0),c(e,n)};function L(e){this.ordinal=e}L.BINSEARCH_NONE=new L(0),L.BINSEARCH_UP=new L(1),L.BINSEARCH_DOWN=new L(2);function q(e,n,m,C,h){var l,u=e.CurrentStep[C],s=!1,x=e.OldValue[C],r=L.BINSEARCH_NONE;for(n.global_gain=x,m-=n.part2_length;;){var N;if(l=S.count_bits(e,h,n,null),u==1||l==m)break;l>m?(r==L.BINSEARCH_DOWN&&(s=!0),s&&(u/=2),r=L.BINSEARCH_UP,N=u):(r==L.BINSEARCH_UP&&(s=!0),s&&(u/=2),r=L.BINSEARCH_DOWN,N=-u),n.global_gain+=N,n.global_gain<0&&a0(),n.global_gain>255&&a0()}for(;l>m&&n.global_gain<255;)n.global_gain++,l=S.count_bits(e,h,n,null);return e.CurrentStep[C]=x-n.global_gain>=4?4:2,e.OldValue[C]=n.global_gain,n.part2_3_length=l,l}function T(e){for(var n=0;n<e.sfbmax;n++)if(e.scalefac[n]+e.subblock_gain[e.window[n]]==0)return!1;return!0}function Y(e,n,m,C,h){var l;switch(e){default:case 9:{n.over_count>0?(l=m.over_SSD<=n.over_SSD,m.over_SSD==n.over_SSD&&(l=m.bits<n.bits)):l=m.max_noise<0&&m.max_noise*10+m.bits<=n.max_noise*10+n.bits;break}case 0:l=m.over_count<n.over_count||m.over_count==n.over_count&&m.over_noise<n.over_noise||m.over_count==n.over_count&&L0.EQ(m.over_noise,n.over_noise)&&m.tot_noise<n.tot_noise;break;case 8:a0();case 1:l=m.max_noise<n.max_noise;break;case 2:l=m.tot_noise<n.tot_noise;break;case 3:l=m.tot_noise<n.tot_noise&&m.max_noise<n.max_noise;break;case 4:l=m.max_noise<=0&&n.max_noise>.2||m.max_noise<=0&&n.max_noise<0&&n.max_noise>m.max_noise-.2&&m.tot_noise<n.tot_noise||m.max_noise<=0&&n.max_noise>0&&n.max_noise>m.max_noise-.2&&m.tot_noise<n.tot_noise+n.over_noise||m.max_noise>0&&n.max_noise>-.05&&n.max_noise>m.max_noise-.1&&m.tot_noise+m.over_noise<n.tot_noise+n.over_noise||m.max_noise>0&&n.max_noise>-.1&&n.max_noise>m.max_noise-.15&&m.tot_noise+m.over_noise+m.over_noise<n.tot_noise+n.over_noise+n.over_noise;break;case 5:l=m.over_noise<n.over_noise||L0.EQ(m.over_noise,n.over_noise)&&m.tot_noise<n.tot_noise;break;case 6:l=m.over_noise<n.over_noise||L0.EQ(m.over_noise,n.over_noise)&&(m.max_noise<n.max_noise||L0.EQ(m.max_noise,n.max_noise)&&m.tot_noise<=n.tot_noise);break;case 7:l=m.over_count<n.over_count||m.over_noise<n.over_noise;break}return n.over_count==0&&(l=l&&m.bits<n.bits),l}function B(e,n,m,C,h){var l=e.internal_flags,u;n.scalefac_scale==0?u=1.2968395546510096:u=1.6817928305074292;for(var s=0,x=0;x<n.sfbmax;x++)s<m[x]&&(s=m[x]);var r=l.noise_shaping_amp;switch(r==3&&a0(),r){case 2:break;case 1:s>1?s=Math.pow(s,.5):s*=.95;break;case 0:default:s>1?s=1:s*=.95;break}for(var N=0,x=0;x<n.sfbmax;x++){var i=n.width[x],_;if(N+=i,!(m[x]<s)){for(l.substep_shaping&2&&a0(),n.scalefac[x]++,_=-i;_<0;_++)C[N+_]*=u,C[N+_]>n.xrpow_max&&(n.xrpow_max=C[N+_]);if(l.noise_shaping_amp==2)return}}}function W(e,n){for(var m=1.2968395546510096,C=0,h=0;h<e.sfbmax;h++){var l=e.width[h],u=e.scalefac[h];if(e.preflag!=0&&(u+=I.pretab[h]),C+=l,u&1){u++;for(var s=-l;s<0;s++)n[C+s]*=m,n[C+s]>e.xrpow_max&&(e.xrpow_max=n[C+s])}e.scalefac[h]=u>>1}e.preflag=0,e.scalefac_scale=1}function A(e,n,m){var C,h=n.scalefac;for(C=0;C<n.sfb_lmax;C++)if(h[C]>=16)return!0;for(var l=0;l<3;l++){var u=0,s=0;for(C=n.sfb_lmax+l;C<n.sfbdivide;C+=3)u<h[C]&&(u=h[C]);for(;C<n.sfbmax;C+=3)s<h[C]&&(s=h[C]);if(!(u<16&&s<8)){if(n.subblock_gain[l]>=7)return!0;n.subblock_gain[l]++;var x=e.scalefac_band.l[n.sfb_lmax];for(C=n.sfb_lmax+l;C<n.sfbmax;C+=3){var r,N=n.width[C],i=h[C];if(i=i-(4>>n.scalefac_scale),i>=0){h[C]=i,x+=N*3;continue}h[C]=0;{var _=210+(i<<n.scalefac_scale+1);r=I.IPOW20(_)}x+=N*(l+1);for(var f=-N;f<0;f++)m[x+f]*=r,m[x+f]>n.xrpow_max&&(n.xrpow_max=m[x+f]);x+=N*(3-l-1)}{var r=I.IPOW20(202);x+=n.width[C]*(l+1);for(var f=-n.width[C];f<0;f++)m[x+f]*=r,m[x+f]>n.xrpow_max&&(n.xrpow_max=m[x+f])}}}return!1}function y(e,n,m,C,h){var l=e.internal_flags;B(e,n,m,C);var u=T(n);return u?!1:(l.mode_gr==2?u=S.scale_bitcount(n):u=S.scale_bitcount_lsf(l,n),u?(l.noise_shaping>1&&(S1.fill(l.pseudohalf,0),n.scalefac_scale==0?(W(n,C),u=!1):n.block_type==o.SHORT_TYPE&&l.subblock_gain>0&&(u=A(l,n,C)||T(n))),u||(l.mode_gr==2?u=S.scale_bitcount(n):u=S.scale_bitcount_lsf(l,n)),!u):!0)}this.outer_loop=function(e,n,m,C,h,l){var u=e.internal_flags,s=new p,x=h0(576),r=h0(k.SFBMAX),N=new o1,i,_=new E,f=9999999,b=!1,M=!1,a=0;if(q(u,n,l,h,C),u.noise_shaping==0)return 100;I.calc_noise(n,m,r,N,_),N.bits=n.part2_3_length,s.assign(n);var t=0;for(g.arraycopy(C,0,x,0,576);!b;){do{var F=new o1,w,D=255;if(u.substep_shaping&2?w=20:w=3,u.sfb21_extra&&a0(),!y(e,s,r,C))break;s.scalefac_scale!=0&&(D=254);var P=l-s.part2_length;if(P<=0)break;for(;(s.part2_3_length=S.count_bits(u,C,s,_))>P&&s.global_gain<=D;)s.global_gain++;if(s.global_gain>D)break;if(N.over_count==0){for(;(s.part2_3_length=S.count_bits(u,C,s,_))>f&&s.global_gain<=D;)s.global_gain++;if(s.global_gain>D)break}if(I.calc_noise(s,m,r,F,_),F.bits=s.part2_3_length,n.block_type!=o.SHORT_TYPE?i=e.quant_comp:i=e.quant_comp_short,i=Y(i,N,F)?1:0,i!=0)f=n.part2_3_length,N=F,n.assign(s),t=0,g.arraycopy(C,0,x,0,576);else if(u.full_outer_loop==0&&(++t>w&&N.over_count==0||u.noise_shaping_amp==3&&M&&t>30||u.noise_shaping_amp==3&&M&&s.global_gain-a>15))break}while(s.global_gain+s.scalefac_scale<255);u.noise_shaping_amp==3?a0():b=!0}return e.VBR==z.vbr_rh||e.VBR==z.vbr_mtrh?g.arraycopy(x,0,C,0,576):u.substep_shaping&1&&a0(),N.over_count},this.iteration_finish_one=function(e,n,m){var C=e.l3_side,h=C.tt[n][m];S.best_scalefac_store(e,n,m,C),e.use_best_huffman==1&&S.best_huffman_divide(e,h),v.ResvAdjust(e,h)}}function l0(){var v=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*v0.SQRT2*.5/2384e-9,.017876148*v0.SQRT2*.5/2384e-9,.003134727*v0.SQRT2*.5/2384e-9,.002457142*v0.SQRT2*.5/2384e-9,971317e-9*v0.SQRT2*.5/2384e-9,218868e-9*v0.SQRT2*.5/2384e-9,101566e-9*v0.SQRT2*.5/2384e-9,13828e-9*v0.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],I=12,X=36,S=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],U=S[o.SHORT_TYPE],c=S[o.SHORT_TYPE],L=S[o.SHORT_TYPE],q=S[o.SHORT_TYPE],T=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function Y(A,y,e){for(var n=10,m=y+238-14-286,C=-15;C<0;C++){var h,l,u;h=v[n+-10],l=A[m+-224]*h,u=A[y+224]*h,h=v[n+-9],l+=A[m+-160]*h,u+=A[y+160]*h,h=v[n+-8],l+=A[m+-96]*h,u+=A[y+96]*h,h=v[n+-7],l+=A[m+-32]*h,u+=A[y+32]*h,h=v[n+-6],l+=A[m+32]*h,u+=A[y+-32]*h,h=v[n+-5],l+=A[m+96]*h,u+=A[y+-96]*h,h=v[n+-4],l+=A[m+160]*h,u+=A[y+-160]*h,h=v[n+-3],l+=A[m+224]*h,u+=A[y+-224]*h,h=v[n+-2],l+=A[y+-256]*h,u-=A[m+256]*h,h=v[n+-1],l+=A[y+-192]*h,u-=A[m+192]*h,h=v[n+0],l+=A[y+-128]*h,u-=A[m+128]*h,h=v[n+1],l+=A[y+-64]*h,u-=A[m+64]*h,h=v[n+2],l+=A[y+0]*h,u-=A[m+0]*h,h=v[n+3],l+=A[y+64]*h,u-=A[m+-64]*h,h=v[n+4],l+=A[y+128]*h,u-=A[m+-128]*h,h=v[n+5],l+=A[y+192]*h,u-=A[m+-192]*h,l*=v[n+6],h=u-l,e[30+C*2]=u+l,e[31+C*2]=v[n+7]*h,n+=18,y--,m++}{var l,u,s,x;u=A[y+-16]*v[n+-10],l=A[y+-32]*v[n+-2],u+=(A[y+-48]-A[y+16])*v[n+-9],l+=A[y+-96]*v[n+-1],u+=(A[y+-80]+A[y+48])*v[n+-8],l+=A[y+-160]*v[n+0],u+=(A[y+-112]-A[y+80])*v[n+-7],l+=A[y+-224]*v[n+1],u+=(A[y+-144]+A[y+112])*v[n+-6],l-=A[y+32]*v[n+2],u+=(A[y+-176]-A[y+144])*v[n+-5],l-=A[y+96]*v[n+3],u+=(A[y+-208]+A[y+176])*v[n+-4],l-=A[y+160]*v[n+4],u+=(A[y+-240]-A[y+208])*v[n+-3],l-=A[y+224],s=l-u,x=l+u,u=e[14],l=e[15]-u,e[31]=x+u,e[30]=s+l,e[15]=s-l,e[14]=x-u}{var r;r=e[28]-e[0],e[0]+=e[28],e[28]=r*v[n+-2*18+7],r=e[29]-e[1],e[1]+=e[29],e[29]=r*v[n+-2*18+7],r=e[26]-e[2],e[2]+=e[26],e[26]=r*v[n+-4*18+7],r=e[27]-e[3],e[3]+=e[27],e[27]=r*v[n+-4*18+7],r=e[24]-e[4],e[4]+=e[24],e[24]=r*v[n+-6*18+7],r=e[25]-e[5],e[5]+=e[25],e[25]=r*v[n+-6*18+7],r=e[22]-e[6],e[6]+=e[22],e[22]=r*v0.SQRT2,r=e[23]-e[7],e[7]+=e[23],e[23]=r*v0.SQRT2-e[7],e[7]-=e[6],e[22]-=e[7],e[23]-=e[22],r=e[6],e[6]=e[31]-r,e[31]=e[31]+r,r=e[7],e[7]=e[30]-r,e[30]=e[30]+r,r=e[22],e[22]=e[15]-r,e[15]=e[15]+r,r=e[23],e[23]=e[14]-r,e[14]=e[14]+r,r=e[20]-e[8],e[8]+=e[20],e[20]=r*v[n+-10*18+7],r=e[21]-e[9],e[9]+=e[21],e[21]=r*v[n+-10*18+7],r=e[18]-e[10],e[10]+=e[18],e[18]=r*v[n+-12*18+7],r=e[19]-e[11],e[11]+=e[19],e[19]=r*v[n+-12*18+7],r=e[16]-e[12],e[12]+=e[16],e[16]=r*v[n+-14*18+7],r=e[17]-e[13],e[13]+=e[17],e[17]=r*v[n+-14*18+7],r=-e[20]+e[24],e[20]+=e[24],e[24]=r*v[n+-12*18+7],r=-e[21]+e[25],e[21]+=e[25],e[25]=r*v[n+-12*18+7],r=e[4]-e[8],e[4]+=e[8],e[8]=r*v[n+-12*18+7],r=e[5]-e[9],e[5]+=e[9],e[9]=r*v[n+-12*18+7],r=e[0]-e[12],e[0]+=e[12],e[12]=r*v[n+-4*18+7],r=e[1]-e[13],e[1]+=e[13],e[13]=r*v[n+-4*18+7],r=e[16]-e[28],e[16]+=e[28],e[28]=r*v[n+-4*18+7],r=-e[17]+e[29],e[17]+=e[29],e[29]=r*v[n+-4*18+7],r=v0.SQRT2*(e[2]-e[10]),e[2]+=e[10],e[10]=r,r=v0.SQRT2*(e[3]-e[11]),e[3]+=e[11],e[11]=r,r=v0.SQRT2*(-e[18]+e[26]),e[18]+=e[26],e[26]=r-e[18],r=v0.SQRT2*(-e[19]+e[27]),e[19]+=e[27],e[27]=r-e[19],r=e[2],e[19]-=e[3],e[3]-=r,e[2]=e[31]-r,e[31]+=r,r=e[3],e[11]-=e[19],e[18]-=r,e[3]=e[30]-r,e[30]+=r,r=e[18],e[27]-=e[11],e[19]-=r,e[18]=e[15]-r,e[15]+=r,r=e[19],e[10]-=r,e[19]=e[14]-r,e[14]+=r,r=e[10],e[11]-=r,e[10]=e[23]-r,e[23]+=r,r=e[11],e[26]-=r,e[11]=e[22]-r,e[22]+=r,r=e[26],e[27]-=r,e[26]=e[7]-r,e[7]+=r,r=e[27],e[27]=e[6]-r,e[6]+=r,r=v0.SQRT2*(e[0]-e[4]),e[0]+=e[4],e[4]=r,r=v0.SQRT2*(e[1]-e[5]),e[1]+=e[5],e[5]=r,r=v0.SQRT2*(e[16]-e[20]),e[16]+=e[20],e[20]=r,r=v0.SQRT2*(e[17]-e[21]),e[17]+=e[21],e[21]=r,r=-v0.SQRT2*(e[8]-e[12]),e[8]+=e[12],e[12]=r-e[8],r=-v0.SQRT2*(e[9]-e[13]),e[9]+=e[13],e[13]=r-e[9],r=-v0.SQRT2*(e[25]-e[29]),e[25]+=e[29],e[29]=r-e[25],r=-v0.SQRT2*(e[24]+e[28]),e[24]-=e[28],e[28]=r-e[24],r=e[24]-e[16],e[24]=r,r=e[20]-r,e[20]=r,r=e[28]-r,e[28]=r,r=e[25]-e[17],e[25]=r,r=e[21]-r,e[21]=r,r=e[29]-r,e[29]=r,r=e[17]-e[1],e[17]=r,r=e[9]-r,e[9]=r,r=e[25]-r,e[25]=r,r=e[5]-r,e[5]=r,r=e[21]-r,e[21]=r,r=e[13]-r,e[13]=r,r=e[29]-r,e[29]=r,r=e[1]-e[0],e[1]=r,r=e[16]-r,e[16]=r,r=e[17]-r,e[17]=r,r=e[8]-r,e[8]=r,r=e[9]-r,e[9]=r,r=e[24]-r,e[24]=r,r=e[25]-r,e[25]=r,r=e[4]-r,e[4]=r,r=e[5]-r,e[5]=r,r=e[20]-r,e[20]=r,r=e[21]-r,e[21]=r,r=e[12]-r,e[12]=r,r=e[13]-r,e[13]=r,r=e[28]-r,e[28]=r,r=e[29]-r,e[29]=r,r=e[0],e[0]+=e[31],e[31]-=r,r=e[1],e[1]+=e[30],e[30]-=r,r=e[16],e[16]+=e[15],e[15]-=r,r=e[17],e[17]+=e[14],e[14]-=r,r=e[8],e[8]+=e[23],e[23]-=r,r=e[9],e[9]+=e[22],e[22]-=r,r=e[24],e[24]+=e[7],e[7]-=r,r=e[25],e[25]+=e[6],e[6]-=r,r=e[4],e[4]+=e[27],e[27]-=r,r=e[5],e[5]+=e[26],e[26]-=r,r=e[20],e[20]+=e[11],e[11]-=r,r=e[21],e[21]+=e[10],e[10]-=r,r=e[12],e[12]+=e[19],e[19]-=r,r=e[13],e[13]+=e[18],e[18]-=r,r=e[28],e[28]+=e[3],e[3]-=r,r=e[29],e[29]+=e[2],e[2]-=r}}function B(A,y){for(var e=0;e<3;e++){var n,m,C,h,l,u;h=A[y+2*3]*S[o.SHORT_TYPE][0]-A[y+5*3],n=A[y+0*3]*S[o.SHORT_TYPE][2]-A[y+3*3],m=h+n,C=h-n,h=A[y+5*3]*S[o.SHORT_TYPE][0]+A[y+2*3],n=A[y+3*3]*S[o.SHORT_TYPE][2]+A[y+0*3],l=h+n,u=-h+n,n=(A[y+1*3]*S[o.SHORT_TYPE][1]-A[y+4*3])*2069978111953089e-26,h=(A[y+4*3]*S[o.SHORT_TYPE][1]+A[y+1*3])*2069978111953089e-26,A[y+3*0]=m*190752519173728e-25+n,A[y+3*5]=-l*190752519173728e-25+h,C=C*.8660254037844387*1907525191737281e-26,l=l*.5*1907525191737281e-26+h,A[y+3*1]=C-l,A[y+3*2]=C+l,m=m*.5*1907525191737281e-26-n,u=u*.8660254037844387*1907525191737281e-26,A[y+3*3]=m+u,A[y+3*4]=m-u,y++}}function W(A,y,e){var n,m;{var C,h,l,u,s,x,r,N;C=e[17]-e[9],l=e[15]-e[11],u=e[14]-e[12],s=e[0]+e[8],x=e[1]+e[7],r=e[2]+e[6],N=e[3]+e[5],A[y+17]=s+r-N-(x-e[4]),m=(s+r-N)*c[12+7]+(x-e[4]),n=(C-l-u)*c[12+6],A[y+5]=n+m,A[y+6]=n-m,h=(e[16]-e[10])*c[12+6],x=x*c[12+7]+e[4],n=C*c[12+0]+h+l*c[12+1]+u*c[12+2],m=-s*c[12+4]+x-r*c[12+5]+N*c[12+3],A[y+1]=n+m,A[y+2]=n-m,n=C*c[12+1]-h-l*c[12+2]+u*c[12+0],m=-s*c[12+5]+x-r*c[12+3]+N*c[12+4],A[y+9]=n+m,A[y+10]=n-m,n=C*c[12+2]-h+l*c[12+0]-u*c[12+1],m=s*c[12+3]-x+r*c[12+4]-N*c[12+5],A[y+13]=n+m,A[y+14]=n-m}{var i,_,f,b,M,a,t,F;i=e[8]-e[0],f=e[6]-e[2],b=e[5]-e[3],M=e[17]+e[9],a=e[16]+e[10],t=e[15]+e[11],F=e[14]+e[12],A[y+0]=M+t+F+(a+e[13]),n=(M+t+F)*c[12+7]-(a+e[13]),m=(i-f+b)*c[12+6],A[y+11]=n+m,A[y+12]=n-m,_=(e[7]-e[1])*c[12+6],a=e[13]-a*c[12+7],n=M*c[12+3]-a+t*c[12+4]+F*c[12+5],m=i*c[12+2]+_+f*c[12+0]+b*c[12+1],A[y+3]=n+m,A[y+4]=n-m,n=-M*c[12+5]+a-t*c[12+3]-F*c[12+4],m=i*c[12+1]+_-f*c[12+2]-b*c[12+0],A[y+7]=n+m,A[y+8]=n-m,n=-M*c[12+4]+a-t*c[12+5]-F*c[12+3],m=i*c[12+0]-_+f*c[12+1]-b*c[12+2],A[y+15]=n+m,A[y+16]=n-m}}this.mdct_sub48=function(A,y,e){for(var n=y,m=286,C=0;C<A.channels_out;C++){for(var h=0;h<A.mode_gr;h++){for(var l,u=A.l3_side.tt[h][C],s=u.xr,x=0,r=A.sb_sample[C][1-h],N=0,i=0;i<18/2;i++)for(Y(n,m,r[N]),Y(n,m+32,r[N+1]),N+=2,m+=64,l=1;l<32;l+=2)r[N-1][l]*=-1;for(l=0;l<32;l++,x+=18){var _=u.block_type,f=A.sb_sample[C][h],b=A.sb_sample[C][1-h];if(u.mixed_block_flag!=0&&l<2&&(_=0),A.amp_filter[l]<1e-12)S1.fill(s,x+0,x+18,0);else if(A.amp_filter[l]<1&&a0(),_==o.SHORT_TYPE){for(var i=-I/4;i<0;i++){var M=S[o.SHORT_TYPE][i+3];s[x+i*3+9]=f[9+i][T[l]]*M-f[8-i][T[l]],s[x+i*3+18]=f[14-i][T[l]]*M+f[15+i][T[l]],s[x+i*3+10]=f[15+i][T[l]]*M-f[14-i][T[l]],s[x+i*3+19]=b[2-i][T[l]]*M+b[3+i][T[l]],s[x+i*3+11]=b[3+i][T[l]]*M-b[2-i][T[l]],s[x+i*3+20]=b[8-i][T[l]]*M+b[9+i][T[l]]}B(s,x)}else{for(var a=h0(18),i=-X/4;i<0;i++){var t,F;t=S[_][i+27]*b[i+9][T[l]]+S[_][i+36]*b[8-i][T[l]],F=S[_][i+9]*f[i+9][T[l]]-S[_][i+18]*f[8-i][T[l]],a[i+9]=t-F*U[3+i+9],a[i+18]=t*U[3+i+9]+F}W(s,x,a)}if(_!=o.SHORT_TYPE&&l!=0)for(var i=7;i>=0;--i){var w,D;w=s[x+i]*L[20+i]+s[x+-1-i]*q[28+i],D=s[x+i]*q[28+i]-s[x+-1-i]*L[20+i],s[x+-1-i]=w,s[x+i]=D}}}if(n=e,m=286,A.mode_gr==1)for(var P=0;P<18;P++)g.arraycopy(A.sb_sample[C][1][P],0,A.sb_sample[C][0][P],0,32)}}}function Q(){this.thm=new F0,this.en=new F0}o.ENCDELAY=576,o.POSTDELAY=1152,o.MDCTDELAY=48,o.FFTOFFSET=224+o.MDCTDELAY,o.DECDELAY=528,o.SBLIMIT=32,o.CBANDS=64,o.SBPSY_l=21,o.SBPSY_s=12,o.SBMAX_l=22,o.SBMAX_s=13,o.PSFB21=6,o.PSFB12=6,o.BLKSIZE=1024,o.HBLKSIZE=o.BLKSIZE/2+1,o.BLKSIZE_s=256,o.HBLKSIZE_s=o.BLKSIZE_s/2+1,o.NORM_TYPE=0,o.START_TYPE=1,o.SHORT_TYPE=2,o.STOP_TYPE=3,o.MPG_MD_LR_LR=0,o.MPG_MD_LR_I=1,o.MPG_MD_MS_LR=2,o.MPG_MD_MS_I=3,o.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function o(){var v=o.MPG_MD_MS_LR,I=null;this.psy=null;var X=null,S=null;this.setModules=function(T,Y,B,W){I=T,this.psy=Y,X=Y,S=W};var U=new l0;function c(T){var Y,B;if(T.ATH.useAdjust==0){T.ATH.adjust=1;return}if(B=T.loudness_sq[0][0],Y=T.loudness_sq[1][0],T.channels_out==2?a0():(B+=B,Y+=Y),T.mode_gr==2&&(B=Math.max(B,Y)),B*=.5,B*=T.ATH.aaSensitivityP,B>.03125)T.ATH.adjust>=1?T.ATH.adjust=1:T.ATH.adjust<T.ATH.adjustLimit&&(T.ATH.adjust=T.ATH.adjustLimit),T.ATH.adjustLimit=1;else{var W=31.98*B+625e-6;T.ATH.adjust>=W?(T.ATH.adjust*=W*.075+.925,T.ATH.adjust<W&&(T.ATH.adjust=W)):T.ATH.adjustLimit>=W?T.ATH.adjust=W:T.ATH.adjust<T.ATH.adjustLimit&&(T.ATH.adjust=T.ATH.adjustLimit),T.ATH.adjustLimit=W}}function L(T){var Y,B;for(T.bitrate_stereoMode_Hist[T.bitrate_index][4]++,T.bitrate_stereoMode_Hist[15][4]++,T.channels_out==2&&a0(),Y=0;Y<T.mode_gr;++Y)for(B=0;B<T.channels_out;++B){var W=T.l3_side.tt[Y][B].block_type|0;T.l3_side.tt[Y][B].mixed_block_flag!=0&&(W=4),T.bitrate_blockType_Hist[T.bitrate_index][W]++,T.bitrate_blockType_Hist[T.bitrate_index][5]++,T.bitrate_blockType_Hist[15][W]++,T.bitrate_blockType_Hist[15][5]++}}function q(T,Y){var B=T.internal_flags,W,A;if(B.lame_encode_frame_init==0){var y,e,n=h0(2014),m=h0(286+1152+576);for(B.lame_encode_frame_init=1,y=0,e=0;y<286+576*(1+B.mode_gr);++y)y<576*B.mode_gr?(n[y]=0,B.channels_out==2&&(m[y]=0)):(n[y]=Y[0][e],B.channels_out==2&&(m[y]=Y[1][e]),++e);for(A=0;A<B.mode_gr;A++)for(W=0;W<B.channels_out;W++)B.l3_side.tt[A][W].block_type=o.SHORT_TYPE;U.mdct_sub48(B,n,m)}}this.lame_encode_mp3_frame=function(T,Y,B,W,A,y){var e,n=B1([2,2]);n[0][0]=new Q,n[0][1]=new Q,n[1][0]=new Q,n[1][1]=new Q;var m=B1([2,2]);m[0][0]=new Q,m[0][1]=new Q,m[1][0]=new Q,m[1][1]=new Q;var C,h=[null,null],l=T.internal_flags,u=G0([2,4]),s=[.5,.5],x=[[0,0],[0,0]],r=[[0,0],[0,0]],N,i,_;if(h[0]=Y,h[1]=B,l.lame_encode_frame_init==0&&q(T,h),l.padding=0,(l.slot_lag-=l.frac_SpF)<0&&(l.slot_lag+=T.out_samplerate,l.padding=1),l.psymodel!=0){var f,b=[null,null],M=0,a=T0(2);for(_=0;_<l.mode_gr;_++){for(i=0;i<l.channels_out;i++)b[i]=h[i],M=576+_*576-o.FFTOFFSET;if(T.VBR==z.vbr_mtrh||T.VBR==z.vbr_mt?a0():f=X.L3psycho_anal_ns(T,b,M,_,n,m,x[_],r[_],u[_],a),f!=0)return-4;for(T.mode==x0.JOINT_STEREO&&a0(),i=0;i<l.channels_out;i++){var t=l.l3_side.tt[_][i];t.block_type=a[i],t.mixed_block_flag=0}}}else a0();if(c(l),U.mdct_sub48(l,h[0],h[1]),l.mode_ext=o.MPG_MD_LR_LR,T.force_ms?l.mode_ext=o.MPG_MD_MS_LR:T.mode==x0.JOINT_STEREO&&a0(),l.mode_ext==v?(C=m,N=r):(C=n,N=x),T.analysis&&l.pinfo!=null&&a0(),T.VBR==z.vbr_off||T.VBR==z.vbr_abr){var F,w;for(F=0;F<18;F++)l.nsPsy.pefirbuf[F]=l.nsPsy.pefirbuf[F+1];for(w=0,_=0;_<l.mode_gr;_++)for(i=0;i<l.channels_out;i++)w+=N[_][i];for(l.nsPsy.pefirbuf[18]=w,w=l.nsPsy.pefirbuf[9],F=0;F<9;F++)w+=(l.nsPsy.pefirbuf[F]+l.nsPsy.pefirbuf[18-F])*o.fircoef[F];for(w=670*5*l.mode_gr*l.channels_out/w,_=0;_<l.mode_gr;_++)for(i=0;i<l.channels_out;i++)N[_][i]*=w}return l.iteration_loop.iteration_loop(T,N,s,C),I.format_bitstream(T),e=I.copy_buffer(l,W,A,y,1),T.bWriteVbrTag&&S.addVbrFrame(T),T.analysis&&l.pinfo!=null&&a0(),L(l),e}}function r0(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}function M0(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[T0(4),T0(4)];for(var v=0;v<2;v++)for(var I=0;I<2;I++)this.tt[v][I]=new p}function F0(){this.l=h0(o.SBMAX_l),this.s=G0([o.SBMAX_s,3]);var v=this;this.assign=function(I){g.arraycopy(I.l,0,v.l,0,o.SBMAX_l);for(var X=0;X<o.SBMAX_s;X++)for(var S=0;S<3;S++)v.s[X][S]=I.s[X][S]}}function a1(){this.last_en_subshort=G0([4,9]),this.lastAttacks=T0(4),this.pefirbuf=h0(19),this.longfact=h0(o.SBMAX_l),this.shortfact=h0(o.SBMAX_s),this.attackthre=0,this.attackthre_s=0}b0.MFSIZE=3*1152+o.ENCDELAY-o.MDCTDELAY,b0.MAX_HEADER_BUF=256,b0.MAX_BITS_PER_CHANNEL=4095,b0.MAX_BITS_PER_GRANULE=7680,b0.BPC=320;function b0(){var v=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=G0([2,b0.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new M0,this.ms_ratio=h0(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=T0(2),this.CurrentStep=T0(2),this.masking_lower=0,this.bv_scf=T0(576),this.pseudohalf=T0(k.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*b0.BPC+1),this.itime=v1(2),this.sideinfo_len=0,this.sb_sample=G0([2,2,18,o.SBLIMIT]),this.amp_filter=h0(32);function I(){this.write_timing=0,this.ptr=0,this.buf=x1(v)}this.header=new Array(b0.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new l1,this.minval_l=h0(o.CBANDS),this.minval_s=h0(o.CBANDS),this.nb_1=G0([4,o.CBANDS]),this.nb_2=G0([4,o.CBANDS]),this.nb_s1=G0([4,o.CBANDS]),this.nb_s2=G0([4,o.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=h0(4),this.loudness_sq=G0([2,2]),this.loudness_sq_save=h0(2),this.mld_l=h0(o.SBMAX_l),this.mld_s=h0(o.SBMAX_s),this.bm_l=T0(o.SBMAX_l),this.bo_l=T0(o.SBMAX_l),this.bm_s=T0(o.SBMAX_s),this.bo_s=T0(o.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=m1([o.CBANDS,2]),this.s3ind_s=m1([o.CBANDS,2]),this.numlines_s=T0(o.CBANDS),this.numlines_l=T0(o.CBANDS),this.rnumlines_l=h0(o.CBANDS),this.mld_cb_l=h0(o.CBANDS),this.mld_cb_s=h0(o.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=h0(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=T0(2),this.nsPsy=new a1,this.VBR_seek_table=new r0,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=m1([16,4+1]),this.bitrate_blockType_Hist=m1([16,4+1+1]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var X=0;X<this.en.length;X++)this.en[X]=new F0;for(var X=0;X<this.thm.length;X++)this.thm[X]=new F0;for(var X=0;X<this.header.length;X++)this.header[X]=new I}function V0(){var v=h0(o.BLKSIZE),I=h0(o.BLKSIZE_s/2),X=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function S(c,L,q){var T=0,Y,B,W;q<<=1;var A=L+q;Y=4;do{var y,e,n,m,C,h,l;l=Y>>1,m=Y,C=Y<<1,h=C+m,Y=C<<1,B=L,W=B+l;do{var u,s,x,r;s=c[B+0]-c[B+m],u=c[B+0]+c[B+m],r=c[B+C]-c[B+h],x=c[B+C]+c[B+h],c[B+C]=u-x,c[B+0]=u+x,c[B+h]=s-r,c[B+m]=s+r,s=c[W+0]-c[W+m],u=c[W+0]+c[W+m],r=v0.SQRT2*c[W+h],x=v0.SQRT2*c[W+C],c[W+C]=u-x,c[W+0]=u+x,c[W+h]=s-r,c[W+m]=s+r,W+=Y,B+=Y}while(B<A);for(e=X[T+0],y=X[T+1],n=1;n<l;n++){var N,i;N=1-2*y*y,i=2*y*e,B=L+n,W=L+m-n;do{var _,f,b,u,s,M,x,a,r,t;f=i*c[B+m]-N*c[W+m],_=N*c[B+m]+i*c[W+m],s=c[B+0]-_,u=c[B+0]+_,M=c[W+0]-f,b=c[W+0]+f,f=i*c[B+h]-N*c[W+h],_=N*c[B+h]+i*c[W+h],r=c[B+C]-_,x=c[B+C]+_,t=c[W+C]-f,a=c[W+C]+f,f=y*x-e*t,_=e*x+y*t,c[B+C]=u-_,c[B+0]=u+_,c[W+h]=M-f,c[W+m]=M+f,f=e*a-y*r,_=y*a+e*r,c[W+C]=b-_,c[W+0]=b+_,c[B+h]=s-f,c[B+m]=s+f,W+=Y,B+=Y}while(B<A);N=e,e=N*X[T+0]-y*X[T+1],y=N*X[T+1]+y*X[T+0]}T+=2}while(Y<q)}var U=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(c,L,q,T,Y){for(var B=0;B<3;B++){var W=o.BLKSIZE_s/2,A=65535&576/3*(B+1),y=o.BLKSIZE_s/8-1;do{var e,n,m,C,h,l=U[y<<2]&255;e=I[l]*T[q][Y+l+A],h=I[127-l]*T[q][Y+l+A+128],n=e-h,e=e+h,m=I[l+64]*T[q][Y+l+A+64],h=I[63-l]*T[q][Y+l+A+192],C=m-h,m=m+h,W-=4,L[B][W+0]=e+m,L[B][W+2]=e-m,L[B][W+1]=n+C,L[B][W+3]=n-C,e=I[l+1]*T[q][Y+l+A+1],h=I[126-l]*T[q][Y+l+A+129],n=e-h,e=e+h,m=I[l+65]*T[q][Y+l+A+65],h=I[62-l]*T[q][Y+l+A+193],C=m-h,m=m+h,L[B][W+o.BLKSIZE_s/2+0]=e+m,L[B][W+o.BLKSIZE_s/2+2]=e-m,L[B][W+o.BLKSIZE_s/2+1]=n+C,L[B][W+o.BLKSIZE_s/2+3]=n-C}while(--y>=0);S(L[B],W,o.BLKSIZE_s/2)}},this.fft_long=function(c,L,q,T,Y){var B=o.BLKSIZE/8-1,W=o.BLKSIZE/2;do{var A,y,e,n,m,C=U[B]&255;A=v[C]*T[q][Y+C],m=v[C+512]*T[q][Y+C+512],y=A-m,A=A+m,e=v[C+256]*T[q][Y+C+256],m=v[C+768]*T[q][Y+C+768],n=e-m,e=e+m,W-=4,L[W+0]=A+e,L[W+2]=A-e,L[W+1]=y+n,L[W+3]=y-n,A=v[C+1]*T[q][Y+C+1],m=v[C+513]*T[q][Y+C+513],y=A-m,A=A+m,e=v[C+257]*T[q][Y+C+257],m=v[C+769]*T[q][Y+C+769],n=e-m,e=e+m,L[W+o.BLKSIZE/2+0]=A+e,L[W+o.BLKSIZE/2+2]=A-e,L[W+o.BLKSIZE/2+1]=y+n,L[W+o.BLKSIZE/2+3]=y-n}while(--B>=0);S(L,W,o.BLKSIZE/2)},this.init_fft=function(c){for(var L=0;L<o.BLKSIZE;L++)v[L]=.42-.5*Math.cos(2*Math.PI*(L+.5)/o.BLKSIZE)+.08*Math.cos(4*Math.PI*(L+.5)/o.BLKSIZE);for(var L=0;L<o.BLKSIZE_s/2;L++)I[L]=.5*(1-Math.cos(2*Math.PI*(L+.5)/o.BLKSIZE_s))}}function R0(){var v=new V0,I=2.302585092994046,X=2,S=16,U=2,c=16,L=.34,q=1/(14752*14752)/(o.BLKSIZE/2),T=.01,Y=.8,B=.6,W=.3,A=3.5,y=21,e=.2302585093;function n(V,R){for(var O=0,n0=0;n0<o.BLKSIZE/2;++n0)O+=V[n0]*R.ATH.eql_w[n0];return O*=q,O}function m(V,R,O,n0,J,G,$,e0,i0,A0,_0){var Q0=V.internal_flags;i0<2?(v.fft_long(Q0,n0[J],i0,A0,_0),v.fft_short(Q0,G[$],i0,A0,_0)):i0==2&&a0(),R[0]=n0[J+0][0],R[0]*=R[0];for(var H0=o.BLKSIZE/2-1;H0>=0;--H0){var W0=n0[J+0][o.BLKSIZE/2-H0],r1=n0[J+0][o.BLKSIZE/2+H0];R[o.BLKSIZE/2-H0]=(W0*W0+r1*r1)*.5}for(var X0=2;X0>=0;--X0){O[X0][0]=G[$+0][X0][0],O[X0][0]*=O[X0][0];for(var H0=o.BLKSIZE_s/2-1;H0>=0;--H0){var W0=G[$+0][X0][o.BLKSIZE_s/2-H0],r1=G[$+0][X0][o.BLKSIZE_s/2+H0];O[X0][o.BLKSIZE_s/2-H0]=(W0*W0+r1*r1)*.5}}{for(var p0=0,H0=11;H0<o.HBLKSIZE;H0++)p0+=R[H0];Q0.tot_ener[i0]=p0}V.analysis&&a0(),V.athaa_loudapprox==2&&i0<2&&(Q0.loudness_sq[e0][i0]=Q0.loudness_sq_save[i0],Q0.loudness_sq_save[i0]=n(R,Q0))}var C=8,h=23,l=15,u,s,x,r=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function N(){u=Math.pow(10,(C+1)/16),s=Math.pow(10,(h+1)/16),x=Math.pow(10,l/10)}var i=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],_=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],f=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function b(V,R,O,n0,J,G){var $;if(R>V)if(R<V*s)$=R/V;else return V+R;else{if(V>=R*s)return V+R;$=V/R}if(V+=R,n0+3<=3+3){if($>=u)return V;var e0=0|v0.FAST_LOG10_X($,16);return V*_[e0]}var e0=0|v0.FAST_LOG10_X($,16);if(G!=0?R=J.ATH.cb_s[O]*J.ATH.adjust:R=J.ATH.cb_l[O]*J.ATH.adjust,V<x*R){if(V>R){var i0,A0;return i0=1,e0<=13&&(i0=f[e0]),A0=v0.FAST_LOG10_X(V/R,10/15),V*((i[e0]-i0)*A0+i0)}return e0>13?V:V*f[e0]}return V*i[e0]}function M(V,R,O,n0,J){var G,$,e0=0,i0=0;for(G=$=0;G<o.SBMAX_s;++$,++G){for(var A0=V.bo_s[G],_0=V.npart_s,Q0=A0<_0?A0:_0;$<Q0;)e0+=R[$],i0+=O[$],$++;if(V.en[n0].s[G][J]=e0,V.thm[n0].s[G][J]=i0,$>=_0){++G;break}{var H0=V.PSY.bo_s_weight[G],W0=1-H0;e0=H0*R[$],i0=H0*O[$],V.en[n0].s[G][J]+=e0,V.thm[n0].s[G][J]+=i0,e0=W0*R[$],i0=W0*O[$]}}for(;G<o.SBMAX_s;++G)V.en[n0].s[G][J]=0,V.thm[n0].s[G][J]=0}function a(V,R,O,n0){var J,G,$=0,e0=0;for(J=G=0;J<o.SBMAX_l;++G,++J){for(var i0=V.bo_l[J],A0=V.npart_l,_0=i0<A0?i0:A0;G<_0;)$+=R[G],e0+=O[G],G++;if(V.en[n0].l[J]=$,V.thm[n0].l[J]=e0,G>=A0){++J;break}{var Q0=V.PSY.bo_l_weight[J],H0=1-Q0;$=Q0*R[G],e0=Q0*O[G],V.en[n0].l[J]+=$,V.thm[n0].l[J]+=e0,$=H0*R[G],e0=H0*O[G]}}for(;J<o.SBMAX_l;++J)V.en[n0].l[J]=0,V.thm[n0].l[J]=0}function t(V,R,O,n0,J,G){var $=V.internal_flags,e0,i0;for(i0=e0=0;i0<$.npart_s;++i0){for(var A0=0,_0=$.numlines_s[i0],Q0=0;Q0<_0;++Q0,++e0){var H0=R[G][e0];A0+=H0}O[i0]=A0}for(e0=i0=0;i0<$.npart_s;i0++){var W0=$.s3ind_s[i0][0],r1=$.s3_ss[e0++]*O[W0];for(++W0;W0<=$.s3ind_s[i0][1];)r1+=$.s3_ss[e0]*O[W0],++e0,++W0;{var X0=U*$.nb_s1[J][i0];n0[i0]=Math.min(r1,X0)}if($.blocktype_old[J&1]==o.SHORT_TYPE){var X0=c*$.nb_s2[J][i0],p0=n0[i0];n0[i0]=Math.min(X0,p0)}$.nb_s2[J][i0]=$.nb_s1[J][i0],$.nb_s1[J][i0]=r1}for(;i0<=o.CBANDS;++i0)O[i0]=0,n0[i0]=0}function F(V,R,O,n0){var J=V.internal_flags;V.short_blocks==w0.short_block_coupled&&!(R[0]!=0&&R[1]!=0)&&(R[0]=R[1]=0);for(var G=0;G<J.channels_out;G++)n0[G]=o.NORM_TYPE,V.short_blocks==w0.short_block_dispensed&&(R[G]=1),V.short_blocks==w0.short_block_forced&&(R[G]=0),R[G]!=0?J.blocktype_old[G]==o.SHORT_TYPE&&(n0[G]=o.STOP_TYPE):(n0[G]=o.SHORT_TYPE,J.blocktype_old[G]==o.NORM_TYPE&&(J.blocktype_old[G]=o.START_TYPE),J.blocktype_old[G]==o.STOP_TYPE&&(J.blocktype_old[G]=o.SHORT_TYPE)),O[G]=J.blocktype_old[G],J.blocktype_old[G]=n0[G]}function w(V,R,O){return O>=1?V:O<=0?R:R>0?Math.pow(V/R,O)*R:0}var D=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function P(V,R){for(var O=309.07,n0=0;n0<o.SBMAX_s-1;n0++)for(var J=0;J<3;J++){var G=V.thm.s[n0][J];if(G>0){var $=G*R,e0=V.en.s[n0][J];e0>$&&(e0>$*1e10?O+=D[n0]*(10*I):O+=D[n0]*v0.FAST_LOG10(e0/$))}}return O}var Z=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function K(V,R){for(var O=281.0575,n0=0;n0<o.SBMAX_l-1;n0++){var J=V.thm.l[n0];if(J>0){var G=J*R,$=V.en.l[n0];$>G&&($>G*1e10?O+=Z[n0]*(10*I):O+=Z[n0]*v0.FAST_LOG10($/G))}}return O}function c0(V,R,O,n0,J){var G,$;for(G=$=0;G<V.npart_l;++G){var e0=0,i0=0,A0;for(A0=0;A0<V.numlines_l[G];++A0,++$){var _0=R[$];e0+=_0,i0<_0&&(i0=_0)}O[G]=e0,n0[G]=i0,J[G]=e0*V.rnumlines_l[G]}}function S0(V,R,O,n0){var J=r.length-1,G=0,$=O[G]+O[G+1];if($>0){var e0=R[G];e0<R[G+1]&&(e0=R[G+1]),$=20*(e0*2-$)/($*(V.numlines_l[G]+V.numlines_l[G+1]-1));var i0=0|$;i0>J&&(i0=J),n0[G]=i0}else n0[G]=0;for(G=1;G<V.npart_l-1;G++)if($=O[G-1]+O[G]+O[G+1],$>0){var e0=R[G-1];e0<R[G]&&(e0=R[G]),e0<R[G+1]&&(e0=R[G+1]),$=20*(e0*3-$)/($*(V.numlines_l[G-1]+V.numlines_l[G]+V.numlines_l[G+1]-1));var i0=0|$;i0>J&&(i0=J),n0[G]=i0}else n0[G]=0;if($=O[G-1]+O[G],$>0){var e0=R[G-1];e0<R[G]&&(e0=R[G]),$=20*(e0*2-$)/($*(V.numlines_l[G-1]+V.numlines_l[G]-1));var i0=0|$;i0>J&&(i0=J),n0[G]=i0}else n0[G]=0}var m0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(V,R,O,n0,J,G,$,e0,i0,A0){var _0=V.internal_flags,Q0=G0([2,o.BLKSIZE]),H0=G0([2,3,o.BLKSIZE_s]),W0=h0(o.CBANDS+1),r1=h0(o.CBANDS+1),X0=h0(o.CBANDS+2),p0=T0(2),j0=T0(2),b1,f0,B0,d0,$0,E1,M1,q0,F1=G0([2,576]),w1,C1=T0(o.CBANDS+2),I1=T0(o.CBANDS+2);for(S1.fill(I1,0),b1=_0.channels_out,V.mode==x0.JOINT_STEREO&&(b1=4),V.VBR==z.vbr_off?w1=_0.ResvMax==0?0:_0.ResvSize/_0.ResvMax*.5:V.VBR==z.vbr_rh||V.VBR==z.vbr_mtrh||V.VBR==z.vbr_mt?w1=.6:w1=1,f0=0;f0<_0.channels_out;f0++){var H1=R[f0],D1=O+576-350-y+192;for(d0=0;d0<576;d0++){var Y1,q1;for(Y1=H1[D1+d0+10],q1=0,$0=0;$0<(y-1)/2-1;$0+=2)Y1+=m0[$0]*(H1[D1+d0+$0]+H1[D1+d0+y-$0]),q1+=m0[$0+1]*(H1[D1+d0+$0+1]+H1[D1+d0+y-$0-1]);F1[f0][d0]=Y1+q1}J[n0][f0].en.assign(_0.en[f0]),J[n0][f0].thm.assign(_0.thm[f0]),b1>2&&a0()}for(f0=0;f0<b1;f0++){var Z1,K1,T1=h0(12),y1=[0,0,0,0],P1=h0(12),Q1=1,g1,J1=h0(o.CBANDS),$1=h0(o.CBANDS),_1=[0,0,0,0],ee=h0(o.HBLKSIZE),ae=G0([3,o.HBLKSIZE_s]);for(d0=0;d0<3;d0++)T1[d0]=_0.nsPsy.last_en_subshort[f0][d0+6],P1[d0]=T1[d0]/_0.nsPsy.last_en_subshort[f0][d0+4],y1[0]+=T1[d0];f0==2&&a0();{var te=F1[f0&1],O1=0;for(d0=0;d0<9;d0++){for(var ne=O1+64,d1=1;O1<ne;O1++)d1<Math.abs(te[O1])&&(d1=Math.abs(te[O1]));_0.nsPsy.last_en_subshort[f0][d0]=T1[d0+3]=d1,y1[1+d0/3]+=d1,d1>T1[d0+3-2]?d1=d1/T1[d0+3-2]:T1[d0+3-2]>d1*10?d1=T1[d0+3-2]/(d1*10):d1=0,P1[d0+3]=d1}}for(V.analysis&&a0(),g1=f0==3?_0.nsPsy.attackthre_s:_0.nsPsy.attackthre,d0=0;d0<12;d0++)_1[d0/3]==0&&P1[d0]>g1&&(_1[d0/3]=d0%3+1);for(d0=1;d0<4;d0++){var G1;y1[d0-1]>y1[d0]?G1=y1[d0-1]/y1[d0]:G1=y1[d0]/y1[d0-1],G1<1.7&&(_1[d0]=0,d0==1&&(_1[0]=0))}for(_1[0]!=0&&_0.nsPsy.lastAttacks[f0]!=0&&(_1[0]=0),(_0.nsPsy.lastAttacks[f0]==3||_1[0]+_1[1]+_1[2]+_1[3]!=0)&&(Q1=0,_1[1]!=0&&_1[0]!=0&&(_1[1]=0),_1[2]!=0&&_1[1]!=0&&(_1[2]=0),_1[3]!=0&&_1[2]!=0&&(_1[3]=0)),f0<2?j0[f0]=Q1:a0(),i0[f0]=_0.tot_ener[f0],K1=H0,Z1=Q0,m(V,ee,ae,Z1,f0&1,K1,f0&1,n0,f0,R,O),c0(_0,ee,W0,J1,$1),S0(_0,J1,$1,C1),q0=0;q0<3;q0++){var j1,A1;for(t(V,ae,r1,X0,f0,q0),M(_0,r1,X0,f0,q0),M1=0;M1<o.SBMAX_s;M1++){if(A1=_0.thm[f0].s[M1][q0],A1*=Y,_1[q0]>=2||_1[q0+1]==1){var N1=q0!=0?q0-1:2,d1=w(_0.thm[f0].s[M1][N1],A1,B*w1);A1=Math.min(A1,d1)}if(_1[q0]==1){var N1=q0!=0?q0-1:2,d1=w(_0.thm[f0].s[M1][N1],A1,W*w1);A1=Math.min(A1,d1)}else if(q0!=0&&_1[q0-1]==3||q0==0&&_0.nsPsy.lastAttacks[f0]==3){var N1=q0!=2?q0+1:0,d1=w(_0.thm[f0].s[M1][N1],A1,W*w1);A1=Math.min(A1,d1)}j1=T1[q0*3+3]+T1[q0*3+4]+T1[q0*3+5],T1[q0*3+5]*6<j1&&(A1*=.5,T1[q0*3+4]*6<j1&&(A1*=.5)),_0.thm[f0].s[M1][q0]=A1}}for(_0.nsPsy.lastAttacks[f0]=_1[2],E1=0,B0=0;B0<_0.npart_l;B0++){for(var k1=_0.s3ind[B0][0],U1=W0[k1]*r[C1[k1]],L1=_0.s3_ll[E1++]*U1;++k1<=_0.s3ind[B0][1];)U1=W0[k1]*r[C1[k1]],L1=b(L1,_0.s3_ll[E1++]*U1,k1,k1-B0,_0,0);L1*=.158489319246111,_0.blocktype_old[f0&1]==o.SHORT_TYPE?X0[B0]=L1:X0[B0]=w(Math.min(L1,Math.min(X*_0.nb_1[f0][B0],S*_0.nb_2[f0][B0])),L1,w1),_0.nb_2[f0][B0]=_0.nb_1[f0][B0],_0.nb_1[f0][B0]=L1}for(;B0<=o.CBANDS;++B0)W0[B0]=0,X0[B0]=0;a(_0,W0,X0,f0)}for((V.mode==x0.STEREO||V.mode==x0.JOINT_STEREO)&&a0(),V.mode==x0.JOINT_STEREO&&a0(),F(V,j0,A0,p0),f0=0;f0<b1;f0++){var V1,X1=0,re,W1;f0>1?a0():(V1=$,X1=0,re=A0[f0],W1=J[n0][f0]),re==o.SHORT_TYPE?V1[X1+f0]=P(W1,_0.masking_lower):V1[X1+f0]=K(W1,_0.masking_lower),V.analysis&&(_0.pinfo.pe[n0][f0]=V1[X1+f0])}return 0};function n1(V){var R,O,n0,J;return R=V,R>=0?R*=3:R*=1.5,R>=.5&&R<=2.5?(J=R-.5,O=8*(J*J-2*J)):O=0,R+=.474,n0=15.811389+7.5*R-17.5*Math.sqrt(1+R*R),n0<=-60?0:(R=Math.exp((O+n0)*e),R/=.6609193,R)}function s1(V){return V<0&&(V=0),V=V*.001,13*Math.atan(.76*V)+3.5*Math.atan(V*V/(7.5*7.5))}function K0(V,R,O,n0,J,G,$,e0,i0,A0,_0,Q0){var H0=h0(o.CBANDS+1),W0=e0/(Q0>15?2*576:2*192),r1=T0(o.HBLKSIZE),X0;e0/=i0;var p0=0,j0=0;for(X0=0;X0<o.CBANDS;X0++){var b1,f0;for(b1=s1(e0*p0),H0[X0]=e0*p0,f0=p0;s1(e0*f0)-b1<L&&f0<=i0/2;f0++);for(V[X0]=f0-p0,j0=X0+1;p0<f0;)r1[p0++]=X0;if(p0>i0/2){p0=i0/2,++X0;break}}H0[X0]=e0*p0;for(var B0=0;B0<Q0;B0++){var d0,$0,E1,M1,q0;E1=A0[B0],M1=A0[B0+1],d0=0|Math.floor(.5+_0*(E1-.5)),d0<0&&(d0=0),$0=0|Math.floor(.5+_0*(M1-.5)),$0>i0/2&&($0=i0/2),O[B0]=(r1[d0]+r1[$0])/2,R[B0]=r1[$0];var F1=W0*M1;$[B0]=(F1-H0[R[B0]])/(H0[R[B0]+1]-H0[R[B0]]),$[B0]<0?$[B0]=0:$[B0]>1&&($[B0]=1),q0=s1(e0*A0[B0]*_0),q0=Math.min(q0,15.5)/15.5,G[B0]=Math.pow(10,1.25*(1-Math.cos(Math.PI*q0))-2.5)}p0=0;for(var w1=0;w1<j0;w1++){var C1=V[w1],b1,I1;b1=s1(e0*p0),I1=s1(e0*(p0+C1-1)),n0[w1]=.5*(b1+I1),b1=s1(e0*(p0-.5)),I1=s1(e0*(p0+C1-.5)),J[w1]=I1-b1,p0+=C1}return j0}function t1(V,R,O,n0,J,G){var $=G0([o.CBANDS,o.CBANDS]),e0,i0=0;if(G)for(var A0=0;A0<R;A0++)for(e0=0;e0<R;e0++){var _0=n1(O[A0]-O[e0])*n0[e0];$[A0][e0]=_0*J[A0]}else a0();for(var A0=0;A0<R;A0++){for(e0=0;e0<R&&!($[A0][e0]>0);e0++);for(V[A0][0]=e0,e0=R-1;e0>0&&!($[A0][e0]>0);e0--);V[A0][1]=e0,i0+=V[A0][1]-V[A0][0]+1}for(var Q0=h0(i0),H0=0,A0=0;A0<R;A0++)for(e0=V[A0][0];e0<=V[A0][1];e0++)Q0[H0++]=$[A0][e0];return Q0}function c1(V){var R=s1(V);return R=Math.min(R,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*R))-2.5)}this.psymodel_init=function(V){var R=V.internal_flags,O,n0=!0,J=13,G=24,$=0,e0=0,i0=-8.25,A0=-4.5,_0=h0(o.CBANDS),Q0=h0(o.CBANDS),H0=h0(o.CBANDS),W0=V.out_samplerate;switch(V.experimentalZ){default:case 0:n0=!0;break;case 1:n0=!(V.VBR==z.vbr_mtrh||V.VBR==z.vbr_mt);break;case 2:n0=!1;break;case 3:J=8,$=-1.75,e0=-.0125,i0=-8.25,A0=-2.25;break}for(R.ms_ener_ratio_old=.25,R.blocktype_old[0]=R.blocktype_old[1]=o.NORM_TYPE,O=0;O<4;++O){for(var p0=0;p0<o.CBANDS;++p0)R.nb_1[O][p0]=1e20,R.nb_2[O][p0]=1e20,R.nb_s1[O][p0]=R.nb_s2[O][p0]=1;for(var r1=0;r1<o.SBMAX_l;r1++)R.en[O].l[r1]=1e20,R.thm[O].l[r1]=1e20;for(var p0=0;p0<3;++p0){for(var r1=0;r1<o.SBMAX_s;r1++)R.en[O].s[r1][p0]=1e20,R.thm[O].s[r1][p0]=1e20;R.nsPsy.lastAttacks[O]=0}for(var p0=0;p0<9;p0++)R.nsPsy.last_en_subshort[O][p0]=10}for(R.loudness_sq_save[0]=R.loudness_sq_save[1]=0,R.npart_l=K0(R.numlines_l,R.bo_l,R.bm_l,_0,Q0,R.mld_l,R.PSY.bo_l_weight,W0,o.BLKSIZE,R.scalefac_band.l,o.BLKSIZE/(2*576),o.SBMAX_l),O=0;O<R.npart_l;O++){var X0=$;_0[O]>=J&&(X0=e0*(_0[O]-J)/(G-J)+$*(G-_0[O])/(G-J)),H0[O]=Math.pow(10,X0/10),R.numlines_l[O]>0?R.rnumlines_l[O]=1/R.numlines_l[O]:R.rnumlines_l[O]=0}R.s3_ll=t1(R.s3ind,R.npart_l,_0,Q0,H0,n0);var p0=0;for(O=0;O<R.npart_l;O++){var j0;j0=O0.MAX_VALUE;for(var b1=0;b1<R.numlines_l[O];b1++,p0++){var f0=W0*p0/(1e3*o.BLKSIZE),B0;B0=this.ATHformula(f0*1e3,V)-20,B0=Math.pow(10,.1*B0),B0*=R.numlines_l[O],j0>B0&&(j0=B0)}R.ATH.cb_l[O]=j0,j0=-20+_0[O]*20/10,j0>6&&(j0=100),j0<-15&&(j0=-15),j0-=8,R.minval_l[O]=Math.pow(10,j0/10)*R.numlines_l[O]}for(R.npart_s=K0(R.numlines_s,R.bo_s,R.bm_s,_0,Q0,R.mld_s,R.PSY.bo_s_weight,W0,o.BLKSIZE_s,R.scalefac_band.s,o.BLKSIZE_s/(2*192),o.SBMAX_s),p0=0,O=0;O<R.npart_s;O++){var j0,X0=i0;_0[O]>=J&&(X0=A0*(_0[O]-J)/(G-J)+i0*(G-_0[O])/(G-J)),H0[O]=Math.pow(10,X0/10),j0=O0.MAX_VALUE;for(var b1=0;b1<R.numlines_s[O];b1++,p0++){var f0=W0*p0/(1e3*o.BLKSIZE_s),B0;B0=this.ATHformula(f0*1e3,V)-20,B0=Math.pow(10,.1*B0),B0*=R.numlines_s[O],j0>B0&&(j0=B0)}R.ATH.cb_s[O]=j0,j0=-7+_0[O]*7/12,_0[O]>12&&(j0*=1+Math.log(1+j0)*3.1),_0[O]<12&&(j0*=1+Math.log(1-j0)*2.3),j0<-15&&(j0=-15),j0-=8,R.minval_s[O]=Math.pow(10,j0/10)*R.numlines_s[O]}R.s3_ss=t1(R.s3ind_s,R.npart_s,_0,Q0,H0,n0),N(),v.init_fft(R),R.decay=Math.exp(-1*I/(T*W0/192));{var d0;d0=A,V.exp_nspsytune&2&&(d0=1),Math.abs(V.msfix)>0&&(d0=V.msfix),V.msfix=d0;for(var $0=0;$0<R.npart_l;$0++)R.s3ind[$0][1]>R.npart_l-1&&(R.s3ind[$0][1]=R.npart_l-1)}var E1=576*R.mode_gr/W0;if(R.ATH.decay=Math.pow(10,-12/10*E1),R.ATH.adjust=.01,R.ATH.adjustLimit=1,V.ATHtype!=-1){var f0,M1=V.out_samplerate/o.BLKSIZE,q0=0;for(f0=0,O=0;O<o.BLKSIZE/2;++O)f0+=M1,R.ATH.eql_w[O]=1/Math.pow(10,this.ATHformula(f0,V)/10),q0+=R.ATH.eql_w[O];for(q0=1/q0,O=o.BLKSIZE/2;--O>=0;)R.ATH.eql_w[O]*=q0}{for(var $0=p0=0;$0<R.npart_s;++$0)for(O=0;O<R.numlines_s[$0];++O)++p0;for(var $0=p0=0;$0<R.npart_l;++$0)for(O=0;O<R.numlines_l[$0];++O)++p0}for(p0=0,O=0;O<R.npart_l;O++){var f0=W0*(p0+R.numlines_l[O]/2)/(1*o.BLKSIZE);R.mld_cb_l[O]=c1(f0),p0+=R.numlines_l[O]}for(;O<o.CBANDS;++O)R.mld_cb_l[O]=1;for(p0=0,O=0;O<R.npart_s;O++){var f0=W0*(p0+R.numlines_s[O]/2)/(1*o.BLKSIZE_s);R.mld_cb_s[O]=c1(f0),p0+=R.numlines_s[O]}for(;O<o.CBANDS;++O)R.mld_cb_s[O]=1;return 0};function R1(V,R){V<-.3&&(V=3410),V/=1e3,V=Math.max(.1,V);var O=3.64*Math.pow(V,-.8)-6.8*Math.exp(-.6*Math.pow(V-3.4,2))+6*Math.exp(-.15*Math.pow(V-8.7,2))+(.6+.04*R)*.001*Math.pow(V,4);return O}this.ATHformula=function(V,R){var O;switch(R.ATHtype){case 0:O=R1(V,9);break;case 1:O=R1(V,-1);break;case 2:O=R1(V,0);break;case 3:O=R1(V,1)+6;break;case 4:O=R1(V,R.ATHcurve);break;default:O=R1(V,0);break}return O}}function t0(){var v=this,I=128*1024;t0.V9=410,t0.V8=420,t0.V7=430,t0.V6=440,t0.V5=450,t0.V4=460,t0.V3=470,t0.V2=480,t0.V1=490,t0.V0=500,t0.R3MIX=1e3,t0.STANDARD=1001,t0.EXTREME=1002,t0.INSANE=1003,t0.STANDARD_FAST=1004,t0.EXTREME_FAST=1005,t0.MEDIUM=1006,t0.MEDIUM_FAST=1007;var X=16384+I;t0.LAME_MAXMP3BUFFER=X;var S,U,c,L,q,T=new R0,Y,B;this.enc=new o,this.setModules=function(a,t,F,w,D,P,Z,K,c0){S=a,U=t,c=F,L=w,q=D,Y=P,B=K,this.enc.setModules(U,T,L,Y)};function W(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=h0(o.SBMAX_l),this.bo_s_weight=h0(o.SBMAX_s)}function A(){this.lowerlimit=0}function y(a,t){this.lowpass=t}var e=4294479419;function n(a){var t;return a.class_id=e,t=a.internal_flags=new b0,a.mode=x0.NOT_SET,a.original=1,a.in_samplerate=44100,a.num_channels=2,a.num_samples=-1,a.bWriteVbrTag=!0,a.quality=-1,a.short_blocks=null,t.subblock_gain=-1,a.lowpassfreq=0,a.highpassfreq=0,a.lowpasswidth=-1,a.highpasswidth=-1,a.VBR=z.vbr_off,a.VBR_q=4,a.ATHcurve=-1,a.VBR_mean_bitrate_kbps=128,a.VBR_min_bitrate_kbps=0,a.VBR_max_bitrate_kbps=0,a.VBR_hard_min=0,t.VBR_min_bitrate=1,t.VBR_max_bitrate=13,a.quant_comp=-1,a.quant_comp_short=-1,a.msfix=-1,t.resample_ratio=1,t.OldValue[0]=180,t.OldValue[1]=180,t.CurrentStep[0]=4,t.CurrentStep[1]=4,t.masking_lower=1,t.nsPsy.attackthre=-1,t.nsPsy.attackthre_s=-1,a.scale=-1,a.athaa_type=-1,a.ATHtype=-1,a.athaa_loudapprox=-1,a.athaa_sensitivity=0,a.useTemporal=null,a.interChRatio=-1,t.mf_samples_to_encode=o.ENCDELAY+o.POSTDELAY,a.encoder_padding=0,t.mf_size=o.ENCDELAY-o.MDCTDELAY,a.findReplayGain=!1,a.decode_on_the_fly=!1,t.decode_on_the_fly=!1,t.findReplayGain=!1,t.findPeakSample=!1,t.RadioGain=0,t.AudiophileGain=0,t.noclipGainChange=0,t.noclipScale=-1,a.preset=0,a.write_id3tag_automatic=!0,0}this.lame_init=function(){var a=new u1;return n(a),a.lame_allocated_gfp=1,a};function m(a){return a>1?0:a<=0?1:Math.cos(Math.PI/2*a)}this.nearestBitrateFullIndex=function(a){var t=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],F=0,w=0,D=0,P=0;P=t[16],D=16,w=t[16],F=16;for(var Z=0;Z<16;Z++)if(Math.max(a,t[Z+1])!=a){P=t[Z+1],D=Z+1,w=t[Z],F=Z;break}return P-a>a-w?F:D};function C(a,t){switch(a){case 44100:return t.version=1,0;case 48e3:return t.version=1,1;case 32e3:return t.version=1,2;case 22050:return t.version=0,0;case 24e3:return t.version=0,1;case 16e3:return t.version=0,2;case 11025:return t.version=0,0;case 12e3:return t.version=0,1;case 8e3:return t.version=0,2;default:return t.version=0,-1}}function h(a,t,F){F<16e3&&(t=2);for(var w=H.bitrate_table[t][1],D=2;D<=14;D++)H.bitrate_table[t][D]>0&&Math.abs(H.bitrate_table[t][D]-a)<Math.abs(w-a)&&(w=H.bitrate_table[t][D]);return w}function l(a,t,F){F<16e3&&(t=2);for(var w=0;w<=14;w++)if(H.bitrate_table[t][w]>0&&H.bitrate_table[t][w]==a)return w;return-1}function u(a,t){var F=[new y(8,2e3),new y(16,3700),new y(24,3900),new y(32,5500),new y(40,7e3),new y(48,7500),new y(56,1e4),new y(64,11e3),new y(80,13500),new y(96,15100),new y(112,15600),new y(128,17e3),new y(160,17500),new y(192,18600),new y(224,19400),new y(256,19700),new y(320,20500)],w=v.nearestBitrateFullIndex(t);a.lowerlimit=F[w].lowpass}function s(a){var t=a.internal_flags,F=32;if(t.lowpass1>0){for(var w=999,D=0;D<=31;D++){var P=D/31;P>=t.lowpass2&&(F=Math.min(F,D)),t.lowpass1<P&&P<t.lowpass2&&(w=Math.min(w,D))}w==999?t.lowpass1=(F-.75)/31:t.lowpass1=(w-.75)/31,t.lowpass2=F/31}t.highpass2>0&&a0(),t.highpass2>0&&a0();for(var D=0;D<32;D++){var Z,K,P=D/31;t.highpass2>t.highpass1?a0():Z=1,t.lowpass2>t.lowpass1?K=m((P-t.lowpass1)/(t.lowpass2-t.lowpass1+1e-20)):K=1,t.amp_filter[D]=Z*K}}function x(a){var t=a.internal_flags;switch(a.quality){default:case 9:t.psymodel=0,t.noise_shaping=0,t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.use_best_huffman=0,t.full_outer_loop=0;break;case 8:a.quality=7;case 7:t.psymodel=1,t.noise_shaping=0,t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.use_best_huffman=0,t.full_outer_loop=0;break;case 6:t.psymodel=1,t.noise_shaping==0&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.subblock_gain==-1&&(t.subblock_gain=1),t.use_best_huffman=0,t.full_outer_loop=0;break;case 5:t.psymodel=1,t.noise_shaping==0&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.subblock_gain==-1&&(t.subblock_gain=1),t.use_best_huffman=0,t.full_outer_loop=0;break;case 4:t.psymodel=1,t.noise_shaping==0&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.subblock_gain==-1&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 3:t.psymodel=1,t.noise_shaping==0&&(t.noise_shaping=1),t.noise_shaping_amp=1,t.noise_shaping_stop=1,t.subblock_gain==-1&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 2:t.psymodel=1,t.noise_shaping==0&&(t.noise_shaping=1),t.substep_shaping==0&&(t.substep_shaping=2),t.noise_shaping_amp=1,t.noise_shaping_stop=1,t.subblock_gain==-1&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 1:t.psymodel=1,t.noise_shaping==0&&(t.noise_shaping=1),t.substep_shaping==0&&(t.substep_shaping=2),t.noise_shaping_amp=2,t.noise_shaping_stop=1,t.subblock_gain==-1&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 0:t.psymodel=1,t.noise_shaping==0&&(t.noise_shaping=1),t.substep_shaping==0&&(t.substep_shaping=2),t.noise_shaping_amp=2,t.noise_shaping_stop=1,t.subblock_gain==-1&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break}}function r(a){var t=a.internal_flags;a.frameNum=0,a.write_id3tag_automatic&&B.id3tag_write_v2(a),t.bitrate_stereoMode_Hist=m1([16,4+1]),t.bitrate_blockType_Hist=m1([16,4+1+1]),t.PeakSample=0,a.bWriteVbrTag&&Y.InitVbrTag(a)}this.lame_init_params=function(a){var t=a.internal_flags;if(t.Class_ID=0,t.ATH==null&&(t.ATH=new f1),t.PSY==null&&(t.PSY=new W),t.rgdata==null&&(t.rgdata=new s0),t.channels_in=a.num_channels,t.channels_in==1&&(a.mode=x0.MONO),t.channels_out=a.mode==x0.MONO?1:2,t.mode_ext=o.MPG_MD_MS_LR,a.mode==x0.MONO&&(a.force_ms=!1),a.VBR==z.vbr_off&&a.VBR_mean_bitrate_kbps!=128&&a.brate==0&&(a.brate=a.VBR_mean_bitrate_kbps),a.VBR==z.vbr_off||a.VBR==z.vbr_mtrh||a.VBR==z.vbr_mt||(a.free_format=!1),a.VBR==z.vbr_off&&a.brate==0&&a0(),a.VBR==z.vbr_off&&a.compression_ratio>0&&a0(),a.out_samplerate!=0&&(a.out_samplerate<16e3?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,64)):a.out_samplerate<32e3?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,160)):(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,32),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,320))),a.lowpassfreq==0){var F=16e3;switch(a.VBR){case z.vbr_off:{var w=new A;u(w,a.brate),F=w.lowerlimit;break}case z.vbr_abr:{var w=new A;u(w,a.VBR_mean_bitrate_kbps),F=w.lowerlimit;break}case z.vbr_rh:a0();default:a0()}a.mode==x0.MONO&&(a.VBR==z.vbr_off||a.VBR==z.vbr_abr)&&(F*=1.5),a.lowpassfreq=F|0}switch(a.out_samplerate==0&&a0(),a.lowpassfreq=Math.min(20500,a.lowpassfreq),a.lowpassfreq=Math.min(a.out_samplerate/2,a.lowpassfreq),a.VBR==z.vbr_off&&(a.compression_ratio=a.out_samplerate*16*t.channels_out/(1e3*a.brate)),a.VBR==z.vbr_abr&&a0(),a.bWriteVbrTag||(a.findReplayGain=!1,a.decode_on_the_fly=!1,t.findPeakSample=!1),t.findReplayGain=a.findReplayGain,t.decode_on_the_fly=a.decode_on_the_fly,t.decode_on_the_fly&&(t.findPeakSample=!0),t.findReplayGain&&a0(),t.decode_on_the_fly&&!a.decode_only&&a0(),t.mode_gr=a.out_samplerate<=24e3?1:2,a.framesize=576*t.mode_gr,a.encoder_delay=o.ENCDELAY,t.resample_ratio=a.in_samplerate/a.out_samplerate,a.VBR){case z.vbr_mt:case z.vbr_rh:case z.vbr_mtrh:{var D=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];a.compression_ratio=D[a.VBR_q]}break;case z.vbr_abr:a.compression_ratio=a.out_samplerate*16*t.channels_out/(1e3*a.VBR_mean_bitrate_kbps);break;default:a.compression_ratio=a.out_samplerate*16*t.channels_out/(1e3*a.brate);break}a.mode==x0.NOT_SET&&(a.mode=x0.JOINT_STEREO),a.highpassfreq>0?a0():(t.highpass1=0,t.highpass2=0),a.lowpassfreq>0?(t.lowpass2=2*a.lowpassfreq,a.lowpasswidth>=0?a0():t.lowpass1=(1-0)*2*a.lowpassfreq,t.lowpass1/=a.out_samplerate,t.lowpass2/=a.out_samplerate):a0(),s(a),t.samplerate_index=C(a.out_samplerate,a),t.samplerate_index<0&&a0(),a.VBR==z.vbr_off?a.free_format?t.bitrate_index=0:(a.brate=h(a.brate,a.version,a.out_samplerate),t.bitrate_index=l(a.brate,a.version,a.out_samplerate),t.bitrate_index<=0&&a0()):t.bitrate_index=1,a.analysis&&(a.bWriteVbrTag=!1),t.pinfo!=null&&(a.bWriteVbrTag=!1),U.init_bit_stream_w(t);for(var P=t.samplerate_index+3*a.version+6*(a.out_samplerate<16e3?1:0),Z=0;Z<o.SBMAX_l+1;Z++)t.scalefac_band.l[Z]=L.sfBandIndex[P].l[Z];for(var Z=0;Z<o.PSFB21+1;Z++){var K=(t.scalefac_band.l[22]-t.scalefac_band.l[21])/o.PSFB21,c0=t.scalefac_band.l[21]+Z*K;t.scalefac_band.psfb21[Z]=c0}t.scalefac_band.psfb21[o.PSFB21]=576;for(var Z=0;Z<o.SBMAX_s+1;Z++)t.scalefac_band.s[Z]=L.sfBandIndex[P].s[Z];for(var Z=0;Z<o.PSFB12+1;Z++){var K=(t.scalefac_band.s[13]-t.scalefac_band.s[12])/o.PSFB12,c0=t.scalefac_band.s[12]+Z*K;t.scalefac_band.psfb12[Z]=c0}t.scalefac_band.psfb12[o.PSFB12]=192,a.version==1?t.sideinfo_len=t.channels_out==1?4+17:4+32:t.sideinfo_len=t.channels_out==1?4+9:4+17,a.error_protection&&(t.sideinfo_len+=2),r(a),t.Class_ID=e;{var S0;for(S0=0;S0<19;S0++)t.nsPsy.pefirbuf[S0]=700*t.mode_gr*t.channels_out;a.ATHtype==-1&&(a.ATHtype=4)}switch(a.VBR){case z.vbr_mt:a.VBR=z.vbr_mtrh;case z.vbr_mtrh:{a.useTemporal==null&&(a.useTemporal=!1),c.apply_preset(a,500-a.VBR_q*10,0),a.quality<0&&(a.quality=LAME_DEFAULT_QUALITY),a.quality<5&&(a.quality=0),a.quality>5&&(a.quality=5),t.PSY.mask_adjust=a.maskingadjust,t.PSY.mask_adjust_short=a.maskingadjust_short,a.experimentalY?t.sfb21_extra=!1:t.sfb21_extra=a.out_samplerate>44e3,t.iteration_loop=new VBRNewIterationLoop(q);break}case z.vbr_rh:{c.apply_preset(a,500-a.VBR_q*10,0),t.PSY.mask_adjust=a.maskingadjust,t.PSY.mask_adjust_short=a.maskingadjust_short,a.experimentalY?t.sfb21_extra=!1:t.sfb21_extra=a.out_samplerate>44e3,a.quality>6&&(a.quality=6),a.quality<0&&(a.quality=LAME_DEFAULT_QUALITY),t.iteration_loop=new VBROldIterationLoop(q);break}default:{var m0;t.sfb21_extra=!1,a.quality<0&&(a.quality=LAME_DEFAULT_QUALITY),m0=a.VBR,m0==z.vbr_off&&(a.VBR_mean_bitrate_kbps=a.brate),c.apply_preset(a,a.VBR_mean_bitrate_kbps,0),a.VBR=m0,t.PSY.mask_adjust=a.maskingadjust,t.PSY.mask_adjust_short=a.maskingadjust_short,m0==z.vbr_off?t.iteration_loop=new i1(q):a0();break}}return a.VBR!=z.vbr_off&&a0(),a.tune&&a0(),x(a),a.athaa_type<0?t.ATH.useAdjust=3:t.ATH.useAdjust=a.athaa_type,t.ATH.aaSensitivityP=Math.pow(10,a.athaa_sensitivity/-10),a.short_blocks==null&&(a.short_blocks=w0.short_block_allowed),a.short_blocks==w0.short_block_allowed&&(a.mode==x0.JOINT_STEREO||a.mode==x0.STEREO)&&(a.short_blocks=w0.short_block_coupled),a.quant_comp<0&&(a.quant_comp=1),a.quant_comp_short<0&&(a.quant_comp_short=0),a.msfix<0&&(a.msfix=0),a.exp_nspsytune=a.exp_nspsytune|1,a.internal_flags.nsPsy.attackthre<0&&(a.internal_flags.nsPsy.attackthre=R0.NSATTACKTHRE),a.internal_flags.nsPsy.attackthre_s<0&&(a.internal_flags.nsPsy.attackthre_s=R0.NSATTACKTHRE_S),a.scale<0&&(a.scale=1),a.ATHtype<0&&(a.ATHtype=4),a.ATHcurve<0&&(a.ATHcurve=4),a.athaa_loudapprox<0&&(a.athaa_loudapprox=2),a.interChRatio<0&&(a.interChRatio=0),a.useTemporal==null&&(a.useTemporal=!0),t.slot_lag=t.frac_SpF=0,a.VBR==z.vbr_off&&(t.slot_lag=t.frac_SpF=(a.version+1)*72e3*a.brate%a.out_samplerate|0),L.iteration_init(a),T.psymodel_init(a),0};function N(a,t){(a.in_buffer_0==null||a.in_buffer_nsamples<t)&&(a.in_buffer_0=h0(t),a.in_buffer_1=h0(t),a.in_buffer_nsamples=t)}this.lame_encode_flush=function(a,t,F,w){var D=a.internal_flags,P=g0([2,1152]),Z=0,K,c0,S0,m0,n1=D.mf_samples_to_encode-o.POSTDELAY,s1=i(a);if(D.mf_samples_to_encode<1)return 0;for(K=0,a.in_samplerate!=a.out_samplerate&&a0(),S0=a.framesize-n1%a.framesize,S0<576&&(S0+=a.framesize),a.encoder_padding=S0,m0=(n1+S0)/a.framesize;m0>0&&Z>=0;){var K0=s1-D.mf_size,t1=a.frameNum;K0*=a.in_samplerate,K0/=a.out_samplerate,K0>1152&&(K0=1152),K0<1&&(K0=1),c0=w-K,w==0&&(c0=0),Z=this.lame_encode_buffer(a,P[0],P[1],K0,t,F,c0),F+=Z,K+=Z,m0-=t1!=a.frameNum?1:0}return D.mf_samples_to_encode=0,Z<0||(c0=w-K,w==0&&(c0=0),U.flush_bitstream(a),Z=U.copy_buffer(D,t,F,c0,1),Z<0)?Z:(F+=Z,K+=Z,c0=w-K,w==0&&(c0=0),a.write_id3tag_automatic&&a0(),K)},this.lame_encode_buffer=function(a,t,F,w,D,P,Z){var K=a.internal_flags,c0=[null,null];if(K.Class_ID!=e)return-3;if(w==0)return 0;N(K,w),c0[0]=K.in_buffer_0,c0[1]=K.in_buffer_1;for(var S0=0;S0<w;S0++)c0[0][S0]=t[S0],K.channels_in>1&&(c0[1][S0]=F[S0]);return _(a,c0[0],c0[1],w,D,P,Z)};function i(a){var t=o.BLKSIZE+a.framesize-o.FFTOFFSET;return t=Math.max(t,512+a.framesize-32),t}function _(a,t,F,w,D,P,Z){var K=a.internal_flags,c0=0,S0,m0,n1,s1,K0,t1=[null,null],c1=[null,null];if(K.Class_ID!=e)return-3;if(w==0)return 0;if(K0=U.copy_buffer(K,D,P,Z,0),K0<0)return K0;if(P+=K0,c0+=K0,c1[0]=t,c1[1]=F,L0.NEQ(a.scale,0)&&L0.NEQ(a.scale,1))for(m0=0;m0<w;++m0)c1[0][m0]*=a.scale,K.channels_out==2&&(c1[1][m0]*=a.scale);if(L0.NEQ(a.scale_left,0)&&L0.NEQ(a.scale_left,1))for(m0=0;m0<w;++m0)c1[0][m0]*=a.scale_left;if(L0.NEQ(a.scale_right,0)&&L0.NEQ(a.scale_right,1))for(m0=0;m0<w;++m0)c1[1][m0]*=a.scale_right;a.num_channels==2&&K.channels_out==1&&a0(),s1=i(a),t1[0]=K.mfbuf[0],t1[1]=K.mfbuf[1];for(var R1=0;w>0;){var V=[null,null],R=0,O=0;V[0]=c1[0],V[1]=c1[1];var n0=new b;if(M(a,t1,V,R1,w,n0),R=n0.n_in,O=n0.n_out,K.findReplayGain&&!K.decode_on_the_fly&&S.AnalyzeSamples(K.rgdata,t1[0],K.mf_size,t1[1],K.mf_size,O,K.channels_out)==k0.GAIN_ANALYSIS_ERROR)return-6;if(w-=R,R1+=R,K.channels_out==2,K.mf_size+=O,K.mf_samples_to_encode<1&&a0(),K.mf_samples_to_encode+=O,K.mf_size>=s1){var J=Z-c0;if(Z==0&&(J=0),S0=f(a,t1[0],t1[1],D,P,J),S0<0)return S0;for(P+=S0,c0+=S0,K.mf_size-=a.framesize,K.mf_samples_to_encode-=a.framesize,n1=0;n1<K.channels_out;n1++)for(m0=0;m0<K.mf_size;m0++)t1[n1][m0]=t1[n1][m0+a.framesize]}}return c0}function f(a,t,F,w,D,P){var Z=v.enc.lame_encode_mp3_frame(a,t,F,w,D,P);return a.frameNum++,Z}function b(){this.n_in=0,this.n_out=0}function M(a,t,F,w,D,P){var Z=a.internal_flags;if(Z.resample_ratio<.9999||Z.resample_ratio>1.0001)a0();else{P.n_out=Math.min(a.framesize,D),P.n_in=P.n_out;for(var K=0;K<P.n_out;++K)t[0][Z.mf_size+K]=F[0][w+K],Z.channels_out==2&&(t[1][Z.mf_size+K]=F[1][w+K])}}}function P0(){this.setModules=function(v,I){}}function D0(){this.setModules=function(v,I,X){}}function E0(){}function Z0(){this.setModules=function(v,I){}}function C0(v,I,X){v!=1&&a0("fix cc: only supports mono");var S=new t0,U=new P0,c=new k0,L=new L0,q=new J0,T=new d,Y=new j,B=new y0,W=new N0,A=new Z0,y=new U0,e=new z0,n=new D0,m=new E0;S.setModules(c,L,q,T,Y,B,W,A,m),L.setModules(c,m,W,B),A.setModules(L,W),q.setModules(S),Y.setModules(L,y,T,e),T.setModules(e,y,S.enc.psy),y.setModules(L),e.setModules(T),B.setModules(S,L,W),U.setModules(n,m),n.setModules(W,A,q);var C=S.lame_init();C.num_channels=v,C.in_samplerate=I,C.out_samplerate=I,C.brate=X,C.mode=x0.STEREO,C.quality=3,C.bWriteVbrTag=!1,C.disable_reservoir=!0,C.write_id3tag_automatic=!1,S.lame_init_params(C);var h=1152,l=0|1.25*h+7200,u=x1(l);this.encodeBuffer=function(s,x){v==1&&(x=s),s.length>h&&(h=s.length,l=0|1.25*h+7200,u=x1(l));var r=S.lame_encode_buffer(C,s,x,s.length,u,0,l);return new Int8Array(u.subarray(0,r))},this.flush=function(){var s=S.lame_encode_flush(C,u,0,l);return new Int8Array(u.subarray(0,s))}}k.SFBMAX=o.SBMAX_s*3,p1.Mp3Encoder=C0}p1(),Y0.lamejs=p1});export{ie as R};

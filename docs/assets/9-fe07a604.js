var u=Object.defineProperty;var d=(t,s,a)=>s in t?u(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var r=(t,s,a)=>(d(t,typeof s!="symbol"?s+"":s,a),a);import{d as h,o as k,c as l}from"./index-04c26d2f.js";const T={class:"9"},I=h({__name:"9",setup(t){class s{constructor(){r(this,"tasks",[]);r(this,"currIndex",0);r(this,"_isRunTask",!1)}addTask(e){this.tasks.push(e)}getTask(){return this.tasks[this.currIndex]}async reset(){this.tasks=[],this.currIndex=0,this._isRunTask=!1}async next(){this.currIndex++,await this.runTask()}async runTask(){const e=this.currIndex,i=this.getTask();if(!this._isRunTask||!i||this.currIndex>=this.tasks.length){await this.reset();return}await i(this.next.bind(this));const o=this.currIndex;e===o&&await this.next()}async run(){this._isRunTask=!0,await this.runTask()}}const n=(()=>new s)();return n.addTask(async c=>{console.log(1,"start"),await c(),console.log(1,"end")}),n.addTask(async()=>{console.log(2)}),n.addTask(async()=>{console.log(3)}),n.run(),(c,e)=>(k(),l("div",T," 9. 任务执行的洋葱模型 "))}});export{I as default};

import{P as S}from"./index-bfc7e514.js";function q(n){let e=0;for(let t=0;t<n.length;++t)n[t]==="&"&&++e;return e}const P=/\s*,(?![^(]*\))\s*/g,O=/\s+/g;function z(n,e){const t=[];return e.split(P).forEach(r=>{let f=q(r);if(f){if(f===1){n.forEach(i=>{t.push(r.replace("&",i))});return}}else{n.forEach(i=>{t.push((i&&i+" ")+r)});return}let o=[r];for(;f--;){const i=[];o.forEach(s=>{n.forEach(h=>{i.push(s.replace("&",h))})}),o=i}o.forEach(i=>t.push(i))}),t}function L(n,e){const t=[];return e.split(P).forEach(r=>{n.forEach(f=>{t.push((f&&f+" ")+r)})}),t}function T(n){let e=[""];return n.forEach(t=>{t=t&&t.trim(),t&&(t.includes("&")?e=z(e,t):e=L(e,t))}),e.join(", ").replace(O," ")}function w(n){if(!n)return;const e=n.parentElement;e&&e.removeChild(n)}function A(n){return document.querySelector(`style[cssr-id="${n}"]`)}function N(n){const e=document.createElement("style");return e.setAttribute("cssr-id",n),e}function p(n){return n?/^\s*@(s|m)/.test(n):!1}const W=/[A-Z]/g;function g(n){return n.replace(W,e=>"-"+e.toLowerCase())}function K(n,e="  "){return typeof n=="object"&&n!==null?` {
`+Object.entries(n).map(t=>e+`  ${g(t[0])}: ${t[1]};`).join(`
`)+`
`+e+"}":`: ${n};`}function U(n,e,t){return typeof n=="function"?n({context:e.context,props:t}):n}function _(n,e,t,r){if(!e)return"";const f=U(e,t,r);if(!f)return"";if(typeof f=="string")return`${n} {
${f}
}`;const o=Object.keys(f);if(o.length===0)return t.config.keepEmptyBlock?n+` {
}`:"";const i=n?[n+" {"]:[];return o.forEach(s=>{const h=f[s];if(s==="raw"){i.push(`
`+h+`
`);return}s=g(s),h!=null&&i.push(`  ${s}${K(h)}`)}),n&&i.push("}"),i.join(`
`)}function C(n,e,t){n&&n.forEach(r=>{if(Array.isArray(r))C(r,e,t);else if(typeof r=="function"){const f=r(e);Array.isArray(f)?C(f,e,t):f&&t(f)}else r&&t(r)})}function M(n,e,t,r,f,o){const i=n.$;let s="";if(!i||typeof i=="string")p(i)?s=i:e.push(i);else if(typeof i=="function"){const d=i({context:r.context,props:f});p(d)?s=d:e.push(d)}else if(i.before&&i.before(r.context),!i.$||typeof i.$=="string")p(i.$)?s=i.$:e.push(i.$);else if(i.$){const d=i.$({context:r.context,props:f});p(d)?s=d:e.push(d)}const h=T(e),m=_(h,n.props,r,f);s?(t.push(`${s} {`),o&&m&&o.insertRule(`${s} {
${m}
}
`)):(o&&m&&o.insertRule(m),!o&&m.length&&t.push(m)),n.children&&C(n.children,{context:r.context,props:f},d=>{if(typeof d=="string"){const b=_(h,{raw:d},r,f);o?o.insertRule(b):t.push(b)}else M(d,e,t,r,f,o)}),e.pop(),s&&t.push("}"),i&&i.after&&i.after(r.context)}function k(n,e,t,r=!1){const f=[];return M(n,[],f,e,t,r?n.instance.__styleSheet:void 0),r?"":f.join(`

`)}function Z(n){for(var e=0,t,r=0,f=n.length;f>=4;++r,f-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(f){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}typeof window<"u"&&(window.__cssrContext={});function D(n,e,t){const{els:r}=e;if(t===void 0)r.forEach(w),e.els=[];else{const f=A(t);f&&r.includes(f)&&(w(f),e.els=r.filter(o=>o!==f))}}function j(n,e){n.push(e)}function F(n,e,t,r,f,o,i,s,h){if(o&&!h){if(t===void 0){console.error("[css-render/mount]: `id` is required in `silent` mode.");return}const $=window.__cssrContext;$[t]||($[t]=!0,k(e,n,r,o));return}let m;if(t===void 0&&(m=e.render(r),t=Z(m)),h){h.adapter(t,m??e.render(r));return}const d=A(t);if(d!==null&&!i)return d;const b=d??N(t);if(m===void 0&&(m=e.render(r)),b.textContent=m,d!==null)return d;if(s){const $=document.head.querySelector(`meta[name="${s}"]`);if($)return document.head.insertBefore(b,$),j(e.els,b),b}return f?document.head.insertBefore(b,document.head.querySelector("style, link")):document.head.appendChild(b),j(e.els,b),b}function G(n){return k(this,this.instance,n)}function H(n={}){const{id:e,ssr:t,props:r,head:f=!1,silent:o=!1,force:i=!1,anchorMetaName:s}=n;return F(this.instance,this,e,r,f,o,i,s,t)}function I(n={}){const{id:e}=n;D(this.instance,this,e)}const E=function(n,e,t,r){return{instance:n,$:e,props:t,children:r,els:[],render:G,mount:H,unmount:I}},J=function(n,e,t,r){return Array.isArray(e)?E(n,{$:null},null,e):Array.isArray(t)?E(n,e,null,t):Array.isArray(r)?E(n,e,t,r):E(n,e,t,null)};function ne(n={}){let e=null;const t={c:(...r)=>J(t,...r),use:(r,...f)=>r.install(t,...f),find:A,context:{},config:n,get __styleSheet(){if(!e){const r=document.createElement("style");return document.head.appendChild(r),e=document.styleSheets[document.styleSheets.length-1],e}return e}};return t}function te(n){let e=".",t="__",r="--",f;if(n){let u=n.blockPrefix;u&&(e=u),u=n.elementPrefix,u&&(t=u),u=n.modifierPrefix,u&&(r=u)}const o={install(u){f=u.c;const a=u.context;a.bem={},a.bem.b=null,a.bem.els=null}};function i(u){let a,l;return{before(c){a=c.bem.b,l=c.bem.els,c.bem.els=null},after(c){c.bem.b=a,c.bem.els=l},$({context:c,props:x}){return u=typeof u=="string"?u:u({context:c,props:x}),c.bem.b=u,`${(x==null?void 0:x.bPrefix)||e}${c.bem.b}`}}}function s(u){let a;return{before(l){a=l.bem.els},after(l){l.bem.els=a},$({context:l,props:c}){return u=typeof u=="string"?u:u({context:l,props:c}),l.bem.els=u.split(",").map(x=>x.trim()),l.bem.els.map(x=>`${(c==null?void 0:c.bPrefix)||e}${l.bem.b}${t}${x}`).join(", ")}}}function h(u){return{$({context:a,props:l}){u=typeof u=="string"?u:u({context:a,props:l});const c=u.split(",").map(y=>y.trim());function x(y){return c.map(R=>`&${(l==null?void 0:l.bPrefix)||e}${a.bem.b}${y!==void 0?`${t}${y}`:""}${r}${R}`).join(", ")}const v=a.bem.els;return v!==null?x(v[0]):x()}}}function m(u){return{$({context:a,props:l}){u=typeof u=="string"?u:u({context:a,props:l});const c=a.bem.els;return`&:not(${(l==null?void 0:l.bPrefix)||e}${a.bem.b}${c!==null&&c.length>0?`${t}${c[0]}`:""}${r}${u})`}}}return Object.assign(o,{cB:(...u)=>f(i(u[0]),u[1],u[2]),cE:(...u)=>f(s(u[0]),u[1],u[2]),cM:(...u)=>f(h(u[0]),u[1],u[2]),cNotM:(...u)=>f(m(u[0]),u[1],u[2])}),o}const B=Symbol("@css-render/vue3-ssr");function Q(n,e){return`<style cssr-id="${n}">
${e}
</style>`}function V(n,e){const t=S(B,null);if(t===null){console.error("[css-render/vue3-ssr]: no ssr context found.");return}const{styles:r,ids:f}=t;f.has(n)||r!==null&&(f.add(n),r.push(Q(n,e)))}const X=typeof document<"u";function re(){if(X)return;const n=S(B,null);if(n!==null)return{adapter:V,context:n}}export{ne as C,te as p,re as u};

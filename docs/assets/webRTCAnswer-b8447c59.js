import{d as c,r,h as i,o as l,c as d,a as _,_ as p}from"./index-ee812f84.js";const m={class:"bbb"},u=c({__name:"webRTCAnswer",setup(w){const a=r(),s=new BroadcastChannel("myChannel");return i(async()=>{const n=new RTCPeerConnection;n.ondatachannel=async e=>{e.channel.onopen=()=>{e.channel.send("Hi back!")},e.channel.onmessage=t=>{console.log(t.data)}},a.value.onloadedmetadata=function(){a.value.play()},n.ontrack=e=>{a.value.srcObject=e.streams[0]},s.onmessage=e=>{o(JSON.parse(e.data))};const o=async e=>{await n.setRemoteDescription(new RTCSessionDescription(e)),await n.setLocalDescription(await n.createAnswer()),s.postMessage(JSON.stringify(n.localDescription))}}),(n,o)=>(l(),d("div",m,[_("video",{ref_key:"video",ref:a,muted:""},null,512)]))}});const h=p(u,[["__scopeId","data-v-881d0672"]]);export{h as default};
